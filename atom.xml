<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>uiste</title>
  <icon>https://www.gravatar.com/avatar/56992660d6f2c687a02a62364e5b9baf</icon>
  <subtitle>uiste</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.uiste.com/"/>
  <updated>2018-11-02T07:58:06.000Z</updated>
  <id>http://blog.uiste.com/</id>
  
  <author>
    <name>uiste</name>
    <email>hi@uiste.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Mac 配置ssh 免密登录</title>
    <link href="http://blog.uiste.com/2018/20181102-3.html"/>
    <id>http://blog.uiste.com/2018/20181102-3.html</id>
    <published>2018-11-02T07:49:00.000Z</published>
    <updated>2018-11-02T07:58:06.000Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># 配置ssh</span><br><span class="line">~ vim ~/.ssh/config</span><br><span class="line"></span><br><span class="line">Host *</span><br><span class="line">    ServerAliveInterval 10</span><br><span class="line"></span><br><span class="line">Host Mweb1</span><br><span class="line">    HostName        服务器IP地址</span><br><span class="line">    Port            端口</span><br><span class="line">    User            用户名</span><br><span class="line">    IdentityFile    私钥地址</span><br><span class="line"></span><br><span class="line">Host Mweb2</span><br><span class="line">    HostName        服务器IP地址</span><br><span class="line">    Port            22</span><br><span class="line">    User            uiste</span><br><span class="line">    IdentityFile    ~/.ssh/id_rsa</span><br><span class="line"></span><br><span class="line"># 登录方式</span><br><span class="line">➜  ~ ssh Mweb1</span><br><span class="line">Last login: Fri Nov  2 08:15:51 2018 from 180.173.83.33</span><br><span class="line">[root@VM_0_6_centos ~]#</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Mac配置远程服务器隧道代理</title>
    <link href="http://blog.uiste.com/2018/20181102-2.html"/>
    <id>http://blog.uiste.com/2018/20181102-2.html</id>
    <published>2018-11-02T07:44:54.000Z</published>
    <updated>2018-11-03T00:13:03.743Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>因为安全原因远程服务器的数据库不允许本地直接访问，又没有开启访问IP白名单时，可以通过隧道代理访问。Windows系统通过xsheel可以设置隧道代理。Mac只需要运行如下命令</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh -p 22  -i ~/.ssh/id_rsa -fNL 代理端口:代理IP:转发原端口 用户名@远程服务器IP</span><br><span class="line"></span><br><span class="line">ssh -p 22  -i ~/.ssh/id_rsa -fNL 3308:127.0.0.1:3306 root@118.xx.xxx.xx</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh -p &#123;ssh_port&#125; -i &#123;rsa_file&#125; -fNL &#123;local_port&#125;:&#123;mysql_ip&#125;:&#123;mysql_port&#125; </span><br><span class="line">&#123;ssh_user&#125;@&#123;ssh_ip&#125;</span><br><span class="line">ssh -p 22  -i ./id_rsa_jump -fNL 33060:mysql_ip:3306 jump@jump_ip   # 实例</span><br></pre></td></tr></table></figure><blockquote><p>-p {ssh_port}: 指定跳板机器的ssh服务的端口<br>-i {rsa_file}:指定连接跳板机的ssh公钥，由跳板机的ssh服务端生成，如果不指定公钥或者公钥验证失败则会弹出密码进行登录。<br>-f:需进行ssh认证<br>-N:只进行端口转发，不执行命令<br>-L:指定连接服务的格式 [bind_address:]port:host:hostport<br>{local_port}：本地监听的端口<br>{mysql_ip}：转发到的mysql的ip或域名<br>{mysql_port}：转发到的mysql的端口<br>{ssh_port}：跳板机的<br>{ssh_user}：跳板机的ssh用户名(如果为rsa登录，则ras对应的用户名和ssh_user一致)<br>{ssh_ip}：跳板机的ip或域名<br>检查是否启动成功<br>netstat  -aon|findstr  “33060”  #存在对应的监听则启动成功 如果要关闭则kill<br>连接mysql<br>ip:127.0.0.1<br>port:33060</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;因为安全原因远程服务器的数据库不允许本地直接访问，又没有开启访问IP白名单时，可以通过隧道代理访问。Windows系统通过xsheel可以设置隧道代理。Mac只需要运行如下命令&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;hi
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>truffle geth 启动Ethereum测试节点</title>
    <link href="http://blog.uiste.com/2018/20181102-1.html"/>
    <id>http://blog.uiste.com/2018/20181102-1.html</id>
    <published>2018-11-02T07:42:14.000Z</published>
    <updated>2018-11-02T07:58:06.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="truffle-框架使用"><a href="#truffle-框架使用" class="headerlink" title="truffle 框架使用"></a>truffle 框架使用</h1><p><strong> uiste@uiste:~$     testrpc </strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">uiste@uiste:~/www/blockchain/test_truffle_2$     truffle unbox webpack</span><br><span class="line">uiste@uiste:~/www/blockchain/test_truffle_2$     truffle develop</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Last login: Mon Apr  2 20:07:27 on ttys008</span><br><span class="line">uiste@uiste:~$     cd www/blockchain/test_truffle_2/</span><br><span class="line">uiste@uiste:~/www/blockchain/test_truffle_2$     npm run dev</span><br></pre></td></tr></table></figure></p><h1 id="geth-方式"><a href="#geth-方式" class="headerlink" title="geth 方式"></a>geth 方式</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">`geth --datadir &quot;./Mychains/dev&quot; --identity &quot;mydev&quot; --rpccorsdomain &quot;*&quot; --networkid 99 console`</span><br><span class="line"></span><br><span class="line">uiste@uiste:~$     cd www/blockchain/test-geth</span><br><span class="line">uiste@uiste:~/www/blockchain/test-geth$     geth --datadir &quot;./Mychains/dev&quot; --identity &quot;mydev&quot; --rpc --rpcapi &quot;db,eth,net,web3,personal,web3&quot; --nodiscover --rpccorsdomain &quot;*&quot; --networkid 100 console</span><br><span class="line"></span><br><span class="line">uiste@uiste:/Applications$      /Applications/Mist.app/Contents/MacOS/Mist --rpc &quot;/Users/uiste/www/blockchain/test-geth/Mychains/dev/geth.ipc&quot;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">geth --datadir &quot;./chain&quot; --identity &quot;mydev&quot; --rpc --rpcapi &quot;db,eth,net,web3,personal,web3&quot; --nodiscover --rpccorsdomain &quot;*&quot; --networkid 100 console 2&gt;&gt;eth_output.log</span><br><span class="line"></span><br><span class="line">geth --dev --rpc --rpccorsdomain &quot;*&quot; --rpcaddr &quot;0.0.0.0&quot; --rpcport &quot;8545&quot; --mine --rpcapi &quot;eth,txpool,web3&quot;</span><br><span class="line"></span><br><span class="line">geth --testnet --rpc --rpccorsdomain &quot;*&quot; --rpcaddr &quot;0.0.0.0&quot; --rpcport &quot;8545&quot;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;truffle-框架使用&quot;&gt;&lt;a href=&quot;#truffle-框架使用&quot; class=&quot;headerlink&quot; title=&quot;truffle 框架使用&quot;&gt;&lt;/a&gt;truffle 框架使用&lt;/h1&gt;&lt;p&gt;&lt;strong&gt; uiste@uiste:~$     te
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>安装walle后进行检测错误总出现的问题解决</title>
    <link href="http://blog.uiste.com/2018/20181023-1.html"/>
    <id>http://blog.uiste.com/2018/20181023-1.html</id>
    <published>2018-10-23T01:05:48.000Z</published>
    <updated>2018-10-23T01:31:13.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="安装walle后进行检测错误总出现的问题解决"><a href="#安装walle后进行检测错误总出现的问题解决" class="headerlink" title="安装walle后进行检测错误总出现的问题解决"></a>安装walle后进行检测错误总出现的问题解决</h1><p>安装好 walle后，进行项目配置，但是检测总是出现错误，错误如下：</p><p>宿主机代码检出检测出错，请确认把php进程用户www的ssh-key加入git的deploy-keys列表。</p><p>目标机器检测出错，请确认php进程www用户ssh-key加入目标机器的www用户ssh-key信任列表。</p><p>目标机 ansible ping 出错，请检查 ~/.ssh/config 及 ssh 证书配置<br>目标机器检测出错，请确认www有目标机器发布版本库/data/www/publish写入权限。</p><p>解决方法：<br>  1，在宿主机安装了ansible后，就消灭了一个关于ansible未安装的问题</p><p>  2，其实我们是把宿主机器php进程用户www加入了目标机器www用户的信任authired_keys表的，但是任然报未加入，此处，主要的错误就是因为我们在目标机器中对于</p><pre><code>www用户的.ssh文件夹和authorized_keys的权限和所属者；chmod -R 755 /home/www/chmod -R 700 /home/www/.ssh/chmod -R 644 /home/www/.ssh/authorized_keys </code></pre><p> 必须满足以上三个条件才能免密码登录，同时也是解决总报没有加入目标机器信任列表的问题关键</p><p> <code>chown  www.www -R /home/www</code>      将所属者为www用户</p><blockquote><p>需要记住的宿主机和目标机器的  .ssh   authorized_keys      /home/www/   都需要注意权限问题  </p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;安装walle后进行检测错误总出现的问题解决&quot;&gt;&lt;a href=&quot;#安装walle后进行检测错误总出现的问题解决&quot; class=&quot;headerlink&quot; title=&quot;安装walle后进行检测错误总出现的问题解决&quot;&gt;&lt;/a&gt;安装walle后进行检测错误总出现的问题
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Mysql 相关命令</title>
    <link href="http://blog.uiste.com/2018/20181022-1.html"/>
    <id>http://blog.uiste.com/2018/20181022-1.html</id>
    <published>2018-10-22T02:56:08.000Z</published>
    <updated>2018-10-22T02:57:14.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Mysql-添加阿里RDS远程登陆用户"><a href="#Mysql-添加阿里RDS远程登陆用户" class="headerlink" title="Mysql 添加阿里RDS远程登陆用户"></a>Mysql 添加阿里RDS远程登陆用户</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use mysql;</span><br><span class="line">mysql&gt; select user,host from user;</span><br><span class="line">mysql&gt; grant all privileges on *.* to &apos;dms&apos;@&apos;121.43.18.67&apos; identified by &apos;mypassword&apos;;</span><br><span class="line">mysql&gt; flush privileges; </span><br><span class="line">mysql&gt; quit;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Mysql-添加阿里RDS远程登陆用户&quot;&gt;&lt;a href=&quot;#Mysql-添加阿里RDS远程登陆用户&quot; class=&quot;headerlink&quot; title=&quot;Mysql 添加阿里RDS远程登陆用户&quot;&gt;&lt;/a&gt;Mysql 添加阿里RDS远程登陆用户&lt;/h1&gt;&lt;figu
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>此项目将被立刻删除，您不能撤销此操作</title>
    <link href="http://blog.uiste.com/2018/20181021-1.html"/>
    <id>http://blog.uiste.com/2018/20181021-1.html</id>
    <published>2018-10-21T08:36:14.000Z</published>
    <updated>2018-10-22T01:47:03.000Z</updated>
    
    <content type="html"><![CDATA[<p>mac 删除文件不经过废纸篓，提示“此项目将被立刻删除，您不能撤销此操作。”，解决办法。</p><p>终端机运行两个命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -R ~/.Trash</span><br><span class="line">killall Finder</span><br></pre></td></tr></table></figure></p><p>退出终端机。</p><p>如果它说你没有权限删除，那么就这样：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -R ~/.Trash</span><br><span class="line">killall Finder</span><br></pre></td></tr></table></figure></p><p>删除废纸篓，finder会自动生成。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;mac 删除文件不经过废纸篓，提示“此项目将被立刻删除，您不能撤销此操作。”，解决办法。&lt;/p&gt;
&lt;p&gt;终端机运行两个命令：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;spa
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Linux 配置，命令</title>
    <link href="http://blog.uiste.com/2018/20181019-2.html"/>
    <id>http://blog.uiste.com/2018/20181019-2.html</id>
    <published>2018-10-19T07:58:26.000Z</published>
    <updated>2018-10-19T08:14:47.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="服务器配置"><a href="#服务器配置" class="headerlink" title="服务器配置"></a>服务器配置</h2><h3 id="添加管理员用户"><a href="#添加管理员用户" class="headerlink" title="添加管理员用户"></a>添加管理员用户</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># useradd test</span><br><span class="line"># passwd test</span><br><span class="line"># mkdir -p /home/test/.ssh</span><br><span class="line"># chown 600 /home/test/.ssh/</span><br><span class="line"># vim /etc/sudoers</span><br><span class="line"># cd /home/test/.ssh/</span><br><span class="line"># rz</span><br><span class="line"># # Received /Users/uiste/.ssh/id_rsa.pub</span><br><span class="line"># ls</span><br><span class="line"># mv id_rsa.pub authorized_keys</span><br><span class="line"># ls -al</span><br><span class="line"># chown test:test authorized_keys </span><br><span class="line"># chmod 700 authorized_keys </span><br><span class="line"># ls -al</span><br><span class="line"># chmod 600 authorized_keys </span><br><span class="line"># ls</span><br><span class="line"># pwd</span><br><span class="line"># chown test:test /home/test/.ssh</span><br><span class="line"># ls -al /home/test/</span><br><span class="line"></span><br><span class="line"># useradd test</span><br><span class="line"></span><br><span class="line">修改管理员配置</span><br><span class="line"># vim /etc/sudoers</span><br><span class="line"></span><br><span class="line">## Allow root to run any commands anywhere </span><br><span class="line">root    ALL=(ALL)       ALL</span><br><span class="line">test     ALL=(ALL)       NOPASSWD: ALL</span><br></pre></td></tr></table></figure><h3 id="切换用户"><a href="#切换用户" class="headerlink" title="切换用户"></a>切换用户</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 切换自定用户</span><br><span class="line"># su - test</span><br><span class="line"></span><br><span class="line"># 切换root用户</span><br><span class="line"># sudo su -</span><br></pre></td></tr></table></figure><h3 id="配置SSH"><a href="#配置SSH" class="headerlink" title="配置SSH"></a>配置SSH</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">chown test:test /home/test/</span><br><span class="line">chmod 755 /home/test/.ssh/</span><br><span class="line"></span><br><span class="line">[test@izbp14s0hny0qt9wghm6lcz .ssh]$ ls -al</span><br><span class="line">total 12</span><br><span class="line">drwxr-xr-x 2 test test 4096 Sep 26 10:54 .</span><br><span class="line">drwx------ 3 test test 4096 Sep 26 10:44 ..</span><br><span class="line">-rw------- 1 test test  411 Sep 26 10:36 authorized_keys</span><br><span class="line"></span><br><span class="line">[test@izbp14s0hny0qt9wghm6lcz .ssh]$ cat authorized_keys </span><br><span class="line">ssh-rsa AAAAB3Nza...E27svfEF6qsVb9B5dooFFFS5hNjyJJma8dyCLzmpAKXH......8XDB+ofAZYkF/7NyU9ON0OwkKWJL4jL570kfazGgJQQwrjWh5x5.....nLsLvQB2rnjbeyV+RXnNemMutokrjIgrT Administrator@PC-20180613WOHL</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">## 常用命令</span><br><span class="line">* 递归创建文件夹</span><br><span class="line">`mkdir -p /data/yiilogs/`</span><br><span class="line"></span><br><span class="line">* 修改文件夹用户</span><br><span class="line">`chown test:test /data/yiilogs/`</span><br><span class="line"></span><br><span class="line">* 修改文件读写权限</span><br><span class="line">`chmod 777 /data/yiilogs/`</span><br><span class="line"></span><br><span class="line">* 查看端口占用情况</span><br><span class="line">`netstat -tunlp | grep 3306`</span><br><span class="line"></span><br><span class="line">* 匹配log中自定内容信息</span><br></pre></td></tr></table></figure><p>tail -f /data/yiilog/xxx/access_app_nginx.log |grep ‘interface-loan/xxx’<br><code>`</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;服务器配置&quot;&gt;&lt;a href=&quot;#服务器配置&quot; class=&quot;headerlink&quot; title=&quot;服务器配置&quot;&gt;&lt;/a&gt;服务器配置&lt;/h2&gt;&lt;h3 id=&quot;添加管理员用户&quot;&gt;&lt;a href=&quot;#添加管理员用户&quot; class=&quot;headerlink&quot; title=
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>lnmp环境 (centos7+nginx+MySQL5.7.9+PHP7)</title>
    <link href="http://blog.uiste.com/2018/20181019-1.html"/>
    <id>http://blog.uiste.com/2018/20181019-1.html</id>
    <published>2018-10-19T07:30:50.000Z</published>
    <updated>2019-01-01T14:38:31.103Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h2><p><strong> 首先更新系统软件 </strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># yum update</span><br></pre></td></tr></table></figure></p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ol><li><p>安装nginx源</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># yum localinstall http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</span><br></pre></td></tr></table></figure></li><li><p>安装nginx</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install nginx</span><br></pre></td></tr></table></figure></li><li><p>启动nginx</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># service nginx start</span><br><span class="line">Redirecting to /bin/systemctl start  nginx.service</span><br></pre></td></tr></table></figure></li><li><p>访问http://你的ip/</p></li></ol><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/conf.d/service.conf</span><br><span class="line"></span><br><span class="line"># api-doc.xxx.com</span><br><span class="line">server &#123;</span><br><span class="line">listen 80; #默认监听 80 端口</span><br><span class="line">server_name api-doc.xxx.com; #配置域名或者公网 ip</span><br><span class="line">location / &#123;</span><br><span class="line">   proxy_pass http://127.0.0.1:4000;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># api-doc.xxx.com</span><br><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  api-doc.xxx.com;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /data/web/blackuser-api-doc/_book;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    error_page   500 502 503 504  /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ~ /\.ht &#123;</span><br><span class="line">        deny  all;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># admin.xxx.com</span><br><span class="line">server&#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name admin.xxx.com;</span><br><span class="line">    root /data/web/xxx/backend/web; # 该项要修改为你准备存放相关网页的路径</span><br><span class="line">    location / &#123;</span><br><span class="line">        index  index.php index.html index.htm;</span><br><span class="line">         #如果请求既不是一个文件，也不是一个目录，则执行一下重写规则</span><br><span class="line">         if (!-e $request_filename)</span><br><span class="line">         &#123;</span><br><span class="line">            #地址作为将参数rewrite到index.php上。</span><br><span class="line">            rewrite ^/(.*)$ /index.php/$1;</span><br><span class="line">            #若是子目录则使用下面这句，将subdir改成目录名称即可。</span><br><span class="line">            #rewrite ^/subdir/(.*)$ /subdir/index.php/$1;</span><br><span class="line">         &#125;</span><br><span class="line">#deny all;</span><br><span class="line">    &#125;</span><br><span class="line">    #proxy the php scripts to php-fpm</span><br><span class="line">    location ~ \.php &#123;</span><br><span class="line">            include fastcgi_params;</span><br><span class="line">            ##pathinfo支持start</span><br><span class="line">            #定义变量 $path_info ，用于存放pathinfo信息</span><br><span class="line">            set $path_info &quot;&quot;;</span><br><span class="line">            #定义变量 $real_script_name，用于存放真实地址</span><br><span class="line">            set $real_script_name $fastcgi_script_name;</span><br><span class="line">            #如果地址与引号内的正则表达式匹配</span><br><span class="line">            if ($fastcgi_script_name ~ &quot;^(.+?\.php)(/.+)$&quot;) &#123;</span><br><span class="line">                    #将文件地址赋值给变量 $real_script_name</span><br><span class="line">                    set $real_script_name $1;</span><br><span class="line">                    #将文件地址后的参数赋值给变量 $path_info</span><br><span class="line">                    set $path_info $2;</span><br><span class="line">            &#125;</span><br><span class="line">            #配置fastcgi的一些参数</span><br><span class="line">            fastcgi_param SCRIPT_FILENAME $document_root$real_script_name;</span><br><span class="line">            fastcgi_param SCRIPT_NAME $real_script_name;</span><br><span class="line">            fastcgi_param PATH_INFO $path_info;</span><br><span class="line">            ###pathinfo支持end</span><br><span class="line">        fastcgi_intercept_errors on;</span><br><span class="line">        fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ^~ /data/runtime &#123;</span><br><span class="line">    return 404;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ^~ /application &#123;</span><br><span class="line">    return 404;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ^~ /simplewind &#123;</span><br><span class="line">    return 404;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="安装MySQL5-7"><a href="#安装MySQL5-7" class="headerlink" title="安装MySQL5.7.*"></a>安装MySQL5.7.*</h2><h3 id="安裝"><a href="#安裝" class="headerlink" title="安裝"></a>安裝</h3><ol><li><p>安装mysql源</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># yum localinstall  http://dev.mysql.com/get/mysql57-community-release-el7-7.noarch.rpm</span><br></pre></td></tr></table></figure></li><li><p>安装mysql</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mysql-community-server</span><br></pre></td></tr></table></figure></li><li><p>安装mysql的开发包，以后会有用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mysql-community-devel</span><br></pre></td></tr></table></figure></li><li><p>启动mysql</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysqld start</span><br></pre></td></tr></table></figure></li><li><p>查看mysql启动状态</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># service mysqld status</span><br><span class="line">出现pid</span><br><span class="line"></span><br><span class="line">证明启动成功</span><br></pre></td></tr></table></figure></li><li><p>获取mysql默认生成的密码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># grep &apos;temporary password&apos; /var/log/mysqld.log</span><br><span class="line">选中的就是密码。</span><br></pre></td></tr></table></figure></li><li><p>换成自己的密码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># mysql -uroot -p</span><br><span class="line">mysql&gt;  set global validate_password_policy=0; # 默认是1，即MEDIUM，所以刚开始设置的密码必须符合长度，且必须含有数字，小写或大写字母，特殊字符。有时候，只是为了自己测试，不想密码设置得那么复杂，譬如说，我只想设置root的密码为123456。</span><br><span class="line">mysql&gt;  set global validate_password_length=1; # validate_password_number_count指定了密码中数据的长度，validate_password_special_char_count指定了密码中特殊字符的长度，validate_password_mixed_case_count指定了密码中大小字母的长度。这些参数，默认值均为1，所以validate_password_length最小值为4，如果你显性指定validate_password_length的值小于4，尽管不会报错，但validate_password_length的值将设为4。</span><br><span class="line">mysql&gt;  ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;MyNewPasdfs4!&apos;;</span><br><span class="line">mysql&gt; quit;</span><br><span class="line"></span><br><span class="line"># mysql -uroot -p</span><br></pre></td></tr></table></figure></li></ol><h2 id="编译安装php7-0-1"><a href="#编译安装php7-0-1" class="headerlink" title="编译安装php7.0.1"></a>编译安装php7.0.1</h2><h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><ol><li><p>下载php7源码包</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># cd /root &amp; wget -O php7.tar.gz http://cn2.php.net/get/php-7.0.1.tar.gz/from/this/mirror</span><br></pre></td></tr></table></figure></li><li><p>解压源码包</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># tar -xvf php7.tar.gz</span><br></pre></td></tr></table></figure></li><li><p>进入目录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># cd php-7.0.1</span><br></pre></td></tr></table></figure></li><li><p>安装php依赖包　</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># yum install libxml2 libxml2-devel openssl openssl-devel bzip2 bzip2-devel libcurl libcurl-devel libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel gmp gmp-devel libmcrypt libmcrypt-devel readline readline-devel libxslt libxslt-devel</span><br></pre></td></tr></table></figure></li><li><p>编译配置，这里如果上一步的某些依赖包没有安装好，就会遇到很多configure error，我们一一解决，安装上相关软件开发包就可以</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"># ./configure \</span><br><span class="line">--prefix=/usr/local/php \</span><br><span class="line">--with-config-file-path=/etc \</span><br><span class="line">--enable-fpm \</span><br><span class="line">--with-fpm-user=nginx  \</span><br><span class="line">--with-fpm-group=nginx \</span><br><span class="line">--enable-inline-optimization \</span><br><span class="line">--disable-debug \</span><br><span class="line">--disable-rpath \</span><br><span class="line">--enable-shared  \</span><br><span class="line">--enable-soap \</span><br><span class="line">--with-libxml-dir \</span><br><span class="line">--with-xmlrpc \</span><br><span class="line">--with-openssl \</span><br><span class="line">--with-mcrypt \</span><br><span class="line">--with-mhash \</span><br><span class="line">--with-pcre-regex \</span><br><span class="line">--with-sqlite3 \</span><br><span class="line">--with-zlib \</span><br><span class="line">--enable-bcmath \</span><br><span class="line">--with-iconv \</span><br><span class="line">--with-bz2 \</span><br><span class="line">--enable-calendar \</span><br><span class="line">--with-curl \</span><br><span class="line">--with-cdb \</span><br><span class="line">--enable-dom \</span><br><span class="line">--enable-exif \</span><br><span class="line">--enable-fileinfo \</span><br><span class="line">--enable-filter \</span><br><span class="line">--with-pcre-dir \</span><br><span class="line">--enable-ftp \</span><br><span class="line">--with-gd \</span><br><span class="line">--with-openssl-dir \</span><br><span class="line">--with-jpeg-dir \</span><br><span class="line">--with-png-dir \</span><br><span class="line">--with-zlib-dir  \</span><br><span class="line">--with-freetype-dir \</span><br><span class="line">--enable-gd-native-ttf \</span><br><span class="line">--enable-gd-jis-conv \</span><br><span class="line">--with-gettext \</span><br><span class="line">--with-gmp \</span><br><span class="line">--with-mhash \</span><br><span class="line">--enable-json \</span><br><span class="line">--enable-mbstring \</span><br><span class="line">--enable-mbregex \</span><br><span class="line">--enable-mbregex-backtrack \</span><br><span class="line">--with-libmbfl \</span><br><span class="line">--with-onig \</span><br><span class="line">--enable-pdo \</span><br><span class="line">--with-mysqli=mysqlnd \</span><br><span class="line">--with-pdo-mysql=mysqlnd \</span><br><span class="line">--with-zlib-dir \</span><br><span class="line">--with-pdo-sqlite \</span><br><span class="line">--with-readline \</span><br><span class="line">--enable-session \</span><br><span class="line">--enable-shmop \</span><br><span class="line">--enable-simplexml \</span><br><span class="line">--enable-sockets  \</span><br><span class="line">--enable-sysvmsg \</span><br><span class="line">--enable-sysvsem \</span><br><span class="line">--enable-sysvshm \</span><br><span class="line">--enable-wddx \</span><br><span class="line">--with-libxml-dir \</span><br><span class="line">--with-xsl \</span><br><span class="line">--enable-zip \</span><br><span class="line">--enable-mysqlnd-compression-support \</span><br><span class="line">--with-pear \</span><br><span class="line">--enable-opcache</span><br></pre></td></tr></table></figure></li><li><p>编译与安装</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># make &amp;&amp; make install</span><br></pre></td></tr></table></figure></li><li><p>添加 PHP 命令到环境变量</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># vim /etc/profile</span><br><span class="line"></span><br><span class="line">在末尾加入</span><br><span class="line"></span><br><span class="line">PATH=$PATH:/usr/local/php/bin</span><br><span class="line">export PATH</span><br><span class="line"></span><br><span class="line">要使改动立即生效执行</span><br><span class="line"># source /etc/profile</span><br></pre></td></tr></table></figure></li><li><p>查看环境变量</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># echo $PATH</span><br><span class="line"># php -v</span><br></pre></td></tr></table></figure></li></ol><h3 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h3><ol><li><p>配置php-fpm</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># cp php.ini-production /etc/php.ini</span><br><span class="line"># cp /usr/local/php/etc/php-fpm.conf.default /usr/local/php/etc/php-fpm.conf</span><br><span class="line"></span><br><span class="line"># cp /usr/local/php/etc/php-fpm.d/www.conf.default /usr/local/php/etc/php-fpm.d/www.conf</span><br><span class="line"># cp sapi/fpm/init.d.php-fpm /etc/init.d/php-fpm</span><br><span class="line"># chmod +x /etc/init.d/php-fpm</span><br></pre></td></tr></table></figure></li><li><p>启动php-fpm</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># /etc/init.d/php-fpm start</span><br></pre></td></tr></table></figure></li></ol><p><strong> 异常处理 </strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">configure error:</span><br><span class="line"></span><br><span class="line">1.configure: error: xml2-config not found. Please check your libxml2 installation.</span><br><span class="line"></span><br><span class="line">解决：</span><br><span class="line"></span><br><span class="line"># yum install libxml2 libxml2-devel&lt;/span&gt;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">2.configure: error: Cannot find OpenSSL&apos;s &lt;evp.h&gt;</span><br><span class="line"></span><br><span class="line">解决：</span><br><span class="line"></span><br><span class="line"># yum install openssl openssl-devel&lt;/span&gt;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">3.configure: error: Please reinstall the BZip2 distribution</span><br><span class="line"></span><br><span class="line">解决：</span><br><span class="line"></span><br><span class="line"># yum install bzip2 bzip2-devel&lt;/span&gt;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">4.configure: error: Please reinstall the libcurl distribution - easy.h should be in &lt;curl-dir&gt;/include/curl/</span><br><span class="line"></span><br><span class="line">解决：</span><br><span class="line"></span><br><span class="line"># yum install libcurl libcurl-devel&lt;/span&gt;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">5.If configure fails try --with-webp-dir=&lt;DIR&gt; configure: error: jpeglib.h not found.</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">解决：</span><br><span class="line"></span><br><span class="line"># yum install libjpeg libjpeg-devel&lt;/span&gt;</span><br><span class="line"></span><br><span class="line">6.If configure fails try --with-webp-dir=&lt;DIR&gt;</span><br><span class="line"></span><br><span class="line">checking for jpeg_read_header in -ljpeg... yes</span><br><span class="line"></span><br><span class="line">configure: error: png.h not found.</span><br><span class="line"></span><br><span class="line">解决：</span><br><span class="line"></span><br><span class="line"># yum install libpng libpng-devel&lt;/span&gt;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">7.If configure fails try --with-webp-dir=&lt;DIR&gt;</span><br><span class="line"></span><br><span class="line">checking for jpeg_read_header in -ljpeg... yes</span><br><span class="line"></span><br><span class="line">checking for png_write_image in -lpng... yes</span><br><span class="line"></span><br><span class="line">If configure fails try --with-xpm-dir=&lt;DIR&gt;</span><br><span class="line"></span><br><span class="line">configure: error: freetype-config not found.</span><br><span class="line"></span><br><span class="line">解决：</span><br><span class="line"></span><br><span class="line"># yum install freetype freetype-devel&lt;/span&gt;</span><br><span class="line">8.configure: error: Unable to locate gmp.h</span><br><span class="line"></span><br><span class="line">解决：</span><br><span class="line"></span><br><span class="line"># yum install gmp gmp-devel&lt;/span&gt;</span><br><span class="line">9.configure: error: mcrypt.h not found. Please reinstall libmcrypt.</span><br><span class="line"></span><br><span class="line">解决：</span><br><span class="line"></span><br><span class="line"># yum install libmcrypt libmcrypt-devel</span><br><span class="line"></span><br><span class="line">10.configure: error: Please reinstall readline - I cannot find readline.h</span><br><span class="line"></span><br><span class="line">解决：</span><br><span class="line"></span><br><span class="line"># yum install readline readline-devel&lt;/span&gt;</span><br><span class="line">11.configure: error: xslt-config not found. Please reinstall the libxslt &gt;= 1.1.0 distribution</span><br><span class="line"></span><br><span class="line">解决：</span><br><span class="line"></span><br><span class="line"># yum install libxslt libxslt-devel&lt;/span&gt;</span><br></pre></td></tr></table></figure></p><h2 id="修改服务运行用户"><a href="#修改服务运行用户" class="headerlink" title="修改服务运行用户"></a>修改服务运行用户</h2><h3 id="修改nginx的运行角色"><a href="#修改nginx的运行角色" class="headerlink" title="修改nginx的运行角色"></a>修改nginx的运行角色</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/nginx</span><br><span class="line">sudo vi nginx.conf</span><br><span class="line"># 头部是这样</span><br><span class="line">user www-data;</span><br><span class="line">worker_processes auto;</span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line">include /etc/nginx/modules-enabled/*.conf;</span><br><span class="line"></span><br><span class="line"># 修改为</span><br><span class="line">user test;</span><br><span class="line">worker_processes auto;</span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line">include /etc/nginx/modules-enabled/*.conf;</span><br><span class="line"></span><br><span class="line">#重启nginx</span><br><span class="line">sudo service nginx restart</span><br></pre></td></tr></table></figure><h3 id="修改php的运行角色"><a href="#修改php的运行角色" class="headerlink" title="修改php的运行角色"></a>修改php的运行角色</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/php/7.0/fpm/pool.d/</span><br><span class="line">sudo vi www.conf</span><br><span class="line"># 找到</span><br><span class="line">user = www-data</span><br><span class="line">group = www-data</span><br><span class="line"></span><br><span class="line"># 改为</span><br><span class="line">user = test</span><br><span class="line">group = test</span><br><span class="line"></span><br><span class="line">cd /run/php/</span><br><span class="line">ls -al</span><br><span class="line"># 这个目录下面有两个文件</span><br><span class="line"># php7.0-fpm.pid和php7.0-fpm.sock</span><br><span class="line"># 修改这两个文件的权限</span><br><span class="line">sudo chown test:test php7.0-fpm.pid</span><br><span class="line">sudo chown test:test php7.0-fpm.sock</span><br><span class="line"></span><br><span class="line"># 重启php-fpm</span><br><span class="line">sudo service php7-fpm restart</span><br></pre></td></tr></table></figure><blockquote><p>test用户是杜撰出来的根据自己的当前用户修改</p></blockquote><h2 id="重启服务"><a href="#重启服务" class="headerlink" title="重启服务"></a>重启服务</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service nginx restart</span><br><span class="line">service php-fpm restart</span><br></pre></td></tr></table></figure><h2 id="配置服务开启启动"><a href="#配置服务开启启动" class="headerlink" title="配置服务开启启动"></a>配置服务开启启动</h2><p>开机自启动nginx，php-fpm（其他服务类似）<br>centos 7以上是用Systemd进行系统初始化的，Systemd 是 Linux 系统中最新的初始化系统（init），它主要的设计目标是克服 sysvinit 固有的缺点，提高系统的启动速度。<br>Systemd服务文件以.service结尾，比如现在要建立nginx为开机启动，如果用yum install命令安装的，yum命令会自动创建nginx.service文件，直接用命令systemcel enable nginx.service设置开机启动即可。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemcel enable nginx.service</span><br></pre></td></tr></table></figure></p><p>源码安装的手动建立nginx.service服务文件<br>在系统服务目录里创建nginx.service文件<br><code>vi /lib/systemd/system/nginx.service</code></p><p>写入以下内容（路径改成自己的）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=nginx</span><br><span class="line">After=network.target</span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/www/lnmp/nginx/sbin/nginx -c /www/lnmp/nginx/conf/nginx.conf</span><br><span class="line">ExecReload=/www/lnmp/nginx/sbin/nginx -s reload</span><br><span class="line">ExecStop=/www/lnmp/nginx/sbin/nginx -s quit</span><br><span class="line">PrivateTmp=true</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure></p><p>在系统服务目录里创建php-fpm.service文件<br><code>vi /lib/systemd/system/php-fpm.service</code></p><p>写入以下内容（路径改成自己的）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=php-fpm</span><br><span class="line">After=network.target</span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/www/lnmp/php/sbin/php-fpm</span><br><span class="line">PrivateTmp=true</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure></p><blockquote><p>Description:描述服务<br>After:描述服务类别<br>[Service]服务运行参数的设置<br>Type=forking是后台运行的形式<br>ExecStart为服务的具体运行命令<br>ExecReload为重启命令<br>ExecStop为停止命令<br>PrivateTmp=True表示给服务分配独立的临时空间<br>注意：[Service]的启动、重启、停止命令全部要求使用绝对路径<br>[Install]运行级别下服务安装的相关设置，可设置为多用户，即系统运行级别为3<br>测试并加入开机自启<br>先关闭nginx，php-fpm<br>使用以下命令开启<br><code>systemctl start nginx.service</code>             #如果服务是开启状态，使用此命令会启动失败。<br><code>systemctl start php-fpm.service</code></p></blockquote><p>开启成功，将服务加入开机自启<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable nginx.service                #注意后面不能跟空格</span><br><span class="line">systemctl enable php-fpm.service</span><br></pre></td></tr></table></figure></p><p>重启服务器，查看是否启动<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shutdown -r now        #重启</span><br><span class="line"></span><br><span class="line">systemctl list-units --type=service           #查看运行的服务</span><br></pre></td></tr></table></figure></p><p>其他命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">systemctl start nginx.service              #启动nginx服务</span><br><span class="line">systemctl enable nginx.service             #设置开机自启动</span><br><span class="line">systemctl disable nginx.service            #停止开机自启动</span><br><span class="line">systemctl status nginx.service             #查看服务当前状态</span><br><span class="line">systemctl restart nginx.service　          #重新启动服务</span><br><span class="line">systemctl list-units --type=service        #查看所有已启动的服务</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;安装nginx&quot;&gt;&lt;a href=&quot;#安装nginx&quot; class=&quot;headerlink&quot; title=&quot;安装nginx&quot;&gt;&lt;/a&gt;安装nginx&lt;/h2&gt;&lt;p&gt;&lt;strong&gt; 首先更新系统软件 &lt;/strong&gt;&lt;br&gt;&lt;figure class=&quot;high
      
    
    </summary>
    
    
      <category term="lnmp" scheme="http://blog.uiste.com/tags/lnmp/"/>
    
  </entry>
  
  <entry>
    <title>Mac OS X下配置远程Linux 服务器SSH密钥认证自动登录</title>
    <link href="http://blog.uiste.com/2017/20171223-1.html"/>
    <id>http://blog.uiste.com/2017/20171223-1.html</id>
    <published>2017-12-23T04:19:17.000Z</published>
    <updated>2018-10-19T01:57:01.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="在本地机器创建公钥"><a href="#在本地机器创建公钥" class="headerlink" title="在本地机器创建公钥"></a>在本地机器创建公钥</h2><p>打开万能的终端，执行如下命令，无视一切输出，一路欢快地回车即可。</p><p>ssh-keygen -t rsa -C  ‘your <a href="mailto:email@domain.com" target="_blank" rel="noopener">email@domain.com</a>‘<br>-t 指定密钥类型，默认即 rsa ，可以省略<br>-C 设置注释文字，比如你的邮箱</p><h2 id="将公钥复制到ssh服务器"><a href="#将公钥复制到ssh服务器" class="headerlink" title="将公钥复制到ssh服务器"></a>将公钥复制到ssh服务器</h2><p>将前一步骤生成的公钥~/id_rsa.pub文件，复制到ssh服务器对应用户下的~/.ssh/authorized_keys文件,可以有多种方式，这里只介绍常用的三种。</p><p>[适用于osx系统]使用ssh-copy-id-for-OSX工具将公钥复制至ssh服务器</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">brew install ssh-copy-id</span><br><span class="line">ssh-copy-id username@hostname  #将username和hostname替换为你的ssh服务器用户名和IP</span><br><span class="line">当ssh服务器username用户目录下尚未有.ssh目录时使用此方式</span><br><span class="line">cat ~/.ssh/id_rsa.pub | ssh username@hostname &quot;mkdir ~/.ssh; cat &gt;&gt; ~/.ssh/authorized_keys&quot;</span><br></pre></td></tr></table></figure><p>通用方式</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scp ~/.ssh/id_rsa.pub username@hostname:~/ #将公钥文件复制至ssh服务器</span><br><span class="line">ssh username@hostname #使用用户名和密码方式登录至ssh服务器</span><br><span class="line">mkdir .ssh  #若.ssh目录已存在，可省略此步</span><br><span class="line">cat id_rsa.pub &gt;&gt; .ssh/authorized_keys  #将公钥文件id_rsa.pub文件内容追加到authorized_keys文件</span><br></pre></td></tr></table></figure><h2 id="快捷登录"><a href="#快捷登录" class="headerlink" title="快捷登录"></a>快捷登录</h2><p>完成以上步骤后，即可使用以下命令直接登录ssh服务器，妈妈再也不用担心你记不住密码了</p><p>ssh username@hostname #将username替换为你的ssh服务器用户名，hostname替换为服务器的ip<br>但是，每次仍然需要输入ssh username@hostname，仍算不上最优的解决方案，要是能实现一键登录或一条命令登录最好不过了，下面来看看都有那些解决方法</p><p>ssh本身也提供了一种快捷的方式来解决这个问题，往~/.ssh/config配置文件添加你的ssh服务器信息即可<br>vim ~/.ssh/config   #若没有该文件，直接新建即可<br>添加文件内容格式如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Host        alias #自定义别名</span><br><span class="line">    HostName        hostname  #替换为你的ssh服务器ip或domain</span><br><span class="line">    Port            port #ssh服务器端口，默认为22</span><br><span class="line">    User            user #ssh服务器用户名</span><br><span class="line">    IdentityFile    ~/.ssh/id_rsa #第一个步骤生成的公钥文件对应的私钥文件</span><br></pre></td></tr></table></figure><p>保存文件退出后，即可使用别名登录ssh服务器</p><p>ssh alias #alias是你在~/.ssh/config文件配置的别名<br>若有多个ssh账号需要配置，只要在~/.ssh/config空行再写即可，如下:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Host        foo</span><br><span class="line">    HostName        192.168.2.222</span><br><span class="line">    Port            22</span><br><span class="line">    User            test</span><br><span class="line">    IdentityFile    ~/.ssh/id_rsa</span><br><span class="line"></span><br><span class="line">Host        alias</span><br><span class="line">    HostName    hostname</span><br><span class="line">    Port        port</span><br><span class="line">    User        user</span><br></pre></td></tr></table></figure><p>如果你本地终端使用的是zsh，那就太简单不过了，直接给zsh添加一条别名</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;alias ssh-to-username=&apos;ssh username@hostname&apos;&quot; &gt;&gt; ~/.zshrc #将username和hostname替换为你的服务器信息</span><br><span class="line">source ~/.zshrc   #重新加载更改后的zshrc文件</span><br><span class="line">ssh-to-username   #使用别名，一条命令即可登录你的ssh服务器</span><br></pre></td></tr></table></figure><p>如果你本地终端使用的是iterm2还可以添加Profile实现一键登录，具体步骤此处略过</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;在本地机器创建公钥&quot;&gt;&lt;a href=&quot;#在本地机器创建公钥&quot; class=&quot;headerlink&quot; title=&quot;在本地机器创建公钥&quot;&gt;&lt;/a&gt;在本地机器创建公钥&lt;/h2&gt;&lt;p&gt;打开万能的终端，执行如下命令，无视一切输出，一路欢快地回车即可。&lt;/p&gt;
&lt;p&gt;ss
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>字符串的gzip压缩与解压的整理</title>
    <link href="http://blog.uiste.com/2017/20170722-1.html"/>
    <id>http://blog.uiste.com/2017/20170722-1.html</id>
    <published>2017-07-21T16:29:24.000Z</published>
    <updated>2018-10-19T01:57:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>背景介绍<br>因为一直在处理restful API，给移动端提供的数据需要考虑流量问题，优先考虑就是压缩现有的字符串，然后再考虑业务逻辑方面的减少流量。鉴于找这些资料也花了不少时间，所以整理了这篇文章，留作纪念。<br>参考网址<br>PHP与C#的压缩与解压<br><a href="http://www.oschina.net/question/2265205_181108" target="_blank" rel="noopener">http://www.oschina.net/question/2265205_181108</a><br><a href="http://my.oschina.net/linland/blog/217769?fromerr=Kf9b6ElQ" target="_blank" rel="noopener">http://my.oschina.net/linland/blog/217769?fromerr=Kf9b6ElQ</a><br><a href="http://www.yiibai.com/sql/function.gzencode.html" target="_blank" rel="noopener">http://www.yiibai.com/sql/function.gzencode.html</a></p><p><a href="https://forums.xamarin.com/discussion/33607/using-system-io-compression-in-pcl" target="_blank" rel="noopener">https://forums.xamarin.com/discussion/33607/using-system-io-compression-in-pcl</a></p><p>=====================<br>python的压缩与解压</p><p><a href="http://outofmemory.cn/code-snippet/2030/Python-usage-gzip-pack-shujubao" target="_blank" rel="noopener">http://outofmemory.cn/code-snippet/2030/Python-usage-gzip-pack-shujubao</a><br><a href="http://www.cnblogs.com/mmix2009/p/3221371.html" target="_blank" rel="noopener">http://www.cnblogs.com/mmix2009/p/3221371.html</a></p><h1 id="http-blog-csdn-net-lxdcyh-article-details-4021476"><a href="#http-blog-csdn-net-lxdcyh-article-details-4021476" class="headerlink" title="http://blog.csdn.net/lxdcyh/article/details/4021476"></a><a href="http://blog.csdn.net/lxdcyh/article/details/4021476" target="_blank" rel="noopener">http://blog.csdn.net/lxdcyh/article/details/4021476</a></h1><p>javascript的压缩与解压<br><a href="http://stackoverflow.com/questions/14620769/decompress-gzip-and-zlib-string-in-javascript" target="_blank" rel="noopener">http://stackoverflow.com/questions/14620769/decompress-gzip-and-zlib-string-in-javascript</a><br><a href="http://nodeca.github.io/pako/" target="_blank" rel="noopener">http://nodeca.github.io/pako/</a></p><p>代码具体实现<br>PHP (&gt;=5.4)</p><p>[php] view plain copy<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$srcString=<span class="string">"1"</span>;  </span><br><span class="line">$srcCompress=base64_encode(gzencode($srcString,<span class="number">9</span>));  </span><br><span class="line"><span class="keyword">echo</span> strlen($srcCompress).<span class="string">'---压缩后字符串长度&lt;br/&gt;'</span>;  </span><br><span class="line">$newString=base64_decode($srcCompress);  </span><br><span class="line">$newString=gzdecode($newString);  </span><br><span class="line"><span class="keyword">echo</span> $newString.<span class="string">'----解压后原字符串&lt;br/&gt;'</span>;</span><br></pre></td></tr></table></figure></p><p>c#<br>(建议还是考虑各个平台的，PCL版本下的见前面的网址，但是没调试通过)</p><p>[csharp] view plain copy<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">using System.IO.Compression;  </span><br><span class="line">using System.Text;  </span><br><span class="line">public  string Compress (string text)  </span><br><span class="line">&#123;  </span><br><span class="line">byte[] buffer = Encoding.UTF8.GetBytes (text);  </span><br><span class="line">using (MemoryStream ms = new MemoryStream ()) &#123;  </span><br><span class="line">GZipStream Compress = new GZipStream (ms, CompressionMode.Compress);  </span><br><span class="line">  </span><br><span class="line">Compress.Write (buffer, 0, buffer.Length);  </span><br><span class="line">  </span><br><span class="line">Compress.Close ();  </span><br><span class="line">  </span><br><span class="line">return Convert.ToBase64String (ms.ToArray ());  </span><br><span class="line">  </span><br><span class="line">&#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">public string Decompress (string text)  </span><br><span class="line">&#123;  </span><br><span class="line">byte[] buffer = Convert.FromBase64String (text);  </span><br><span class="line">using (MemoryStream tempMs = new MemoryStream ()) &#123;  </span><br><span class="line">using (MemoryStream ms = new MemoryStream (buffer)) &#123;  </span><br><span class="line">GZipStream Decompress = new GZipStream (ms, CompressionMode.Decompress);  </span><br><span class="line">  </span><br><span class="line">Decompress.CopyTo (tempMs);  </span><br><span class="line">  </span><br><span class="line">Decompress.Close ();  </span><br><span class="line">  </span><br><span class="line">return Encoding.UTF8.GetString (tempMs.ToArray ());  </span><br><span class="line">&#125;  </span><br><span class="line">&#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>python<br>[python] view plain copy<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8  </span></span><br><span class="line"><span class="keyword">import</span> base64  </span><br><span class="line"><span class="keyword">import</span> StringIO,gzip  </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">zipData</span><span class="params">( content)</span>:</span>  </span><br><span class="line">    zbuf = StringIO.StringIO()  </span><br><span class="line">    zfile = gzip.GzipFile(mode=<span class="string">'wb'</span>, compresslevel=<span class="number">9</span>, fileobj=zbuf)  </span><br><span class="line">    zfile.write(content)  </span><br><span class="line">    zfile.close()  </span><br><span class="line">    <span class="keyword">return</span> base64.b64encode(zbuf.getvalue())  </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">unzipData</span><span class="params">(content)</span>:</span>  </span><br><span class="line">    compresseddata=base64.b64decode(content)  </span><br><span class="line">    compressedstream = StringIO.StringIO(compresseddata)  </span><br><span class="line">    gzipper = gzip.GzipFile(fileobj=compressedstream)  </span><br><span class="line">    data = gzipper.read()  </span><br><span class="line">    <span class="keyword">return</span> data  </span><br><span class="line">s=zipData(<span class="string">"1"</span>)  </span><br><span class="line"><span class="keyword">print</span> s  </span><br><span class="line">s1=unzipData(s)  </span><br><span class="line"><span class="keyword">print</span> s1</span><br></pre></td></tr></table></figure></p><p>javascript<br>[html] view plain copy<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;  </span><br><span class="line">&lt;head&gt;  </span><br><span class="line">&lt;meta charset=<span class="string">"UTF-8"</span>&gt;  </span><br><span class="line">&lt;script src=<span class="string">"http://code.jquery.com/jquery-2.1.4.min.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span>  </span><br><span class="line">&lt;script src=<span class="string">"https://raw.githubusercontent.com/nodeca/pako/master/dist/pako.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span>  </span><br><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">gzip</span>(<span class="params">string</span>) </span>&#123;  </span><br><span class="line"><span class="keyword">var</span> charData    = string.split(<span class="string">''</span>).map(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> x.charCodeAt(<span class="number">0</span>);&#125;);  </span><br><span class="line"><span class="keyword">var</span> binData     = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(charData);  </span><br><span class="line"><span class="keyword">var</span> data= pako.gzip(binData);  </span><br><span class="line"><span class="keyword">var</span> strData= <span class="built_in">String</span>.fromCharCode.apply(<span class="literal">null</span>, <span class="keyword">new</span> <span class="built_in">Uint16Array</span>(data));  </span><br><span class="line"><span class="keyword">return</span> btoa(strData);  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ungzip</span>(<span class="params">string</span>)  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line"><span class="keyword">var</span> strData     = atob(string);  </span><br><span class="line"><span class="keyword">var</span> charData    = strData.split(<span class="string">''</span>).map(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> x.charCodeAt(<span class="number">0</span>);&#125;);  </span><br><span class="line"><span class="keyword">var</span> binData     = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(charData);  </span><br><span class="line"><span class="keyword">var</span> data= pako.ungzip(binData);  </span><br><span class="line"><span class="keyword">var</span> strData= <span class="built_in">String</span>.fromCharCode.apply(<span class="literal">null</span>, <span class="keyword">new</span> <span class="built_in">Uint16Array</span>(data));  </span><br><span class="line"><span class="keyword">return</span> strData;  </span><br><span class="line">&#125;  </span><br><span class="line">test=<span class="string">"1"</span>;  </span><br><span class="line"><span class="keyword">var</span> s=gzip(test);  </span><br><span class="line">alert(s);  </span><br><span class="line">alert(ungzip(s));  </span><br><span class="line">&lt;<span class="regexp">/script&gt;  </span></span><br><span class="line"><span class="regexp">&lt;/</span>head&gt;  </span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;背景介绍&lt;br&gt;因为一直在处理restful API，给移动端提供的数据需要考虑流量问题，优先考虑就是压缩现有的字符串，然后再考虑业务逻辑方面的减少流量。鉴于找这些资料也花了不少时间，所以整理了这篇文章，留作纪念。&lt;br&gt;参考网址&lt;br&gt;PHP与C#的压缩与解压&lt;br&gt;&lt;a
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>关于file_get_contents(&quot;php://input&quot;)</title>
    <link href="http://blog.uiste.com/2017/20170721-1.html"/>
    <id>http://blog.uiste.com/2017/20170721-1.html</id>
    <published>2017-07-21T15:13:13.000Z</published>
    <updated>2018-10-19T01:57:01.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>“php://input allows you to read raw POST data. It is a less memory intensive alternative to $HTTP_RAW_POST_DATA and does not need any special php.ini directives. php://input is not available with enctype=”multipart/form-data”. </p></blockquote><p>翻译过来，是这样：<br>“php://input可以读取没有处理过的POST数据。相较于$HTTP_RAW_POST_DATA而言，它给内存带来的压力较小，并且不需要特殊的php.ini设置。php://input不能用于enctype=multipart/form-data”<br>找了一通资料，原来是这么回事：</p><p>1，Coentent-Type仅在取值为application/x-www-data-urlencoded和multipart/form-data两种情况下，</p><p>PHP才会将http请求数据包中相应的数据填入全局变量$_POST </p><p>2，PHP不能识别的Content-Type类型的时候，会将http请求包中相应的数据填入变量$HTTP_RAW_POST_DATA </p><p>3, 只有Coentent-Type不为multipart/form-data的时候，PHP不会将http请求数据包中的相应数据填入php://input，</p><p>否则其它情况都会。填入的长度，由Coentent-Length指定。 </p><p>4，只有Content-Type为application/x-www-data-urlencoded时，php://input数据才跟$_POST数据相一致。 </p><p>5，php://input数据总是跟$HTTP_RAW_POST_DATA相同，但是php://input比$HTTP_RAW_POST_DATA更凑效，</p><p>且不需要特殊设置php.ini </p><p>6，PHP会将PATH字段的query_path部分，填入全局变量$_GET。通常情况下，GET方法提交的http请求，body为空。</p><p>从官网信息来看，php://input是一个只读信息流，当请求方式是post的，并且enctype不等于”multipart/form-data”时，可以使用php://input来获取原始请求的数据。</p><p>看一个简单的例子。</p><p>客户端就是一个表单，非常简单。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">method</span>=<span class="string">"POST"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    name: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"tom"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    age:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"22"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Submit"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>将表单提交到服务端，服务端使用file_get_contents获取php://input内容</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$content = file_get_contents(<span class="string">"php://input"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> $content; <span class="comment">//输出name=tom&amp;amp;age=22</span></span><br></pre></td></tr></table></figure><p>官网关于php://input的说明中，反复有提到$HTTP_RAW_POST_DATA这个变量，这个变量其实和file_get_contents(php://input)的内容是一样的。如果要开启这个变量，需要修改配置文件，找到always_populate_raw_post_data这个选项，设置为On，然后重新启动web服务器，就可以了。而使用php://input不需要修改php配置文件。</p><p>在项目应用中，如摄像头拍照，上传保存，就可以用到php://input。客户端拍照后，把图片流传送到服务端，服务端使用file_get_getcontents(‘php://input’)就能获取到图片流，然后把图片流保存到一个文件，这个文件就是图片了</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;“php://input allows you to read raw POST data. It is a less memory intensive alternative to $HTTP_RAW_POST_DATA and does not
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>gitbook安装与使用</title>
    <link href="http://blog.uiste.com/2017/20170719-1.html"/>
    <id>http://blog.uiste.com/2017/20170719-1.html</id>
    <published>2017-07-18T16:02:05.000Z</published>
    <updated>2018-10-19T01:57:01.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="gitbook安装"><a href="#gitbook安装" class="headerlink" title="gitbook安装"></a>gitbook安装</h2><ol><li>安装npm<br>从网站 <a href="https://nodejs.org/#download" target="_blank" rel="noopener">https://nodejs.org/#download</a> 下载node.js源代码（点击绿色的INSTALL），<br>解压<br>./configure<br>make<br>make install<br>成功执行后，npm就被安装好了。</li></ol><ol start="2"><li>gitbook 安装<br><code>npm install -g gitbook-cli</code><br><code>gitbook -V</code><br>查看gitbook是否安装成功。</li></ol><h2 id="gitbook使用"><a href="#gitbook使用" class="headerlink" title="gitbook使用"></a>gitbook使用</h2><ol><li>根据目录生成图书结构 </li></ol><p>1.1 README.md 与 SUMMARY编写<br>README.md<br>这个文件相当于一本Gitbook的简介。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir test_gitbook</span><br><span class="line">$ touch README.md</span><br></pre></td></tr></table></figure></p><p>SUMMARY.md<br>这个文件是一本书的目录结构，使用Markdown语法，<br>如我们这本书的SUMMARY.md：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ touch SUMMARY.md</span><br><span class="line">$ vim SUMMARY.md</span><br></pre></td></tr></table></figure></p><p>输入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* [简介](README.md)</span><br><span class="line">* [第一章](chapter1/README.md)</span><br><span class="line"> - [第一节](chapter1/section1.md)</span><br><span class="line"> - [第二节](chapter1/section2.md)</span><br><span class="line">* [第二章](chapter2/README.md)</span><br><span class="line"> - [第一节](chapter2/section1.md)</span><br><span class="line"> - [第二节](chapter2/section2.md)</span><br><span class="line">* [结束](end/README.md)</span><br></pre></td></tr></table></figure><p>1.2 生成图书结构<br>当这个目录文件创建好之后，我们可以使用Gitbook<br>的命令行工具将这个目录结构生成相应的目录及文件：<br>$ gitbook init<br>$ tree . #查看建立的目录和文件<br>.<br>├── chapter1<br>│   ├── README.md<br>│   ├── section1.md<br>│   └── section2.md<br>├── chapter2<br>│   ├── README.md<br>│   ├── section1.md<br>│   └── section2.md<br>├── end<br>│   └── README.md<br>├── README.md<br>└── SUMMARY.md</p><p>我们可以看到，gitbook给我们生成了与SUMMARY.md所<br>对应的目录及文件。</p><p>每个目录中，都有一个README.md文件，相当于一章的说明。</p><ol start="2"><li>生成图书</li></ol><p>2.1 输出为静态网站<br>你有两种方式输出一个静态网站：<br>2.1.1 本地预览时自动生成<br>当你在自己的电脑上编辑好图书之后，你可以使用Gitbook<br>的命令行进行本地预览：</p><p><code>$ gitbook serve</code></p><p>然后浏览器中输入 <a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a> 就可以预览生<br>成的以网页形式组织的书籍。<br>这里你会发现，你在你的图书项目的目录中多了一个名为<br>_book的文件目录，而这个目录中的文件，即是生成的静态<br>网站内容。<br>使用build参数生成到指定目录<br>与直接预览生成的静态网站文件不一样的是，使用这个命令，<br>你可以将内容输入到你所想要的目录中去：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir /tmp/gitbook</span><br><span class="line">$ gitbook build --output=/tmp/gitbook</span><br></pre></td></tr></table></figure></p><p>2.2 输出PDF<br>输入为PDF文件，需要先使用NPM安装上gitbook pdf：<br><code>$ sudo npm install gitbook-pdf -g</code><br>我在执行上面这条命令的时候出现了下面的错误：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">***************************************************</span><br><span class="line">Downloading http://cdn.bitbucket.org/ariya/phantomjs/downloads/phantomjs-1.9.7-linux-i686.tar.bz2</span><br><span class="line">Saving to /usr/local/lib/node_modules/gitbook-pdf/node_modules/phantomjs/phantomjs/phantomjs-1.9.7-linux-i686.tar.bz2</span><br><span class="line">Error: connect ETIMEDOUT</span><br><span class="line">    at exports._errnoException (util.js:746:11)</span><br><span class="line">    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1010:19)</span><br><span class="line">npm ERR! Linux 3.2.0-4-686-pae</span><br><span class="line">npm ERR! argv &quot;/usr/local/bin/node&quot; &quot;/usr/local/bin/npm&quot; &quot;install&quot; &quot;gitbook-pdf&quot; &quot;-g&quot;</span><br><span class="line">npm ERR! node v0.12.7</span><br><span class="line">npm ERR! npm  v2.11.3</span><br><span class="line">npm ERR! code ELIFECYCLE</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">npm ERR! phantomjs@1.9.7-5 install: `node install.js`</span><br><span class="line">npm ERR! Exit status 1</span><br><span class="line">npm ERR! </span><br><span class="line">npm ERR! Failed at the phantomjs@1.9.7-5 install script &apos;node install.js&apos;.</span><br><span class="line">npm ERR! This is most likely a problem with the phantomjs package,</span><br><span class="line">npm ERR! not with npm itself.</span><br><span class="line">npm ERR! Tell the author that this fails on your system:</span><br><span class="line">npm ERR!     node install.js</span><br><span class="line">npm ERR! You can get their info via:</span><br><span class="line">npm ERR!     npm owner ls phantomjs</span><br><span class="line">npm ERR! There is likely additional logging output above.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">npm ERR! Please include the following file with any support request:</span><br><span class="line">npm ERR!     /home/wangxq/repository/phantomjs/npm-debug.log</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">***************************************************</span><br></pre></td></tr></table></figure></p><p>由错误报告内容的第一行可以知道，发生错误的原因是下载<br>phantomjs发生了错误，因此我们需要手动下载和安装。</p><p>解决方法：[1]<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git clone git://github.com/ariya/phantomjs.git</span><br><span class="line">$ sudo apt-get install build-essential g++ flex bison gperf ruby perl \</span><br><span class="line">  libsqlite3-dev libfontconfig1-dev libicu-dev libfreetype6 libssl-dev \</span><br><span class="line">  libpng-dev libjpeg-dev python libx11-dev libxext-dev       #安装编译需要的工具和依赖</span><br><span class="line">$ cd phantomjs</span><br><span class="line">$ git checkout 1.9.7  #注意：这里的1.9.7是phantom的版本号，可以由错误报告的第一行找出 </span><br><span class="line">$ ./build.sh --jobs 4</span><br><span class="line">$ sudo cp bin/phantomjs /bin/</span><br><span class="line">$ sudo npm install gitbook-pdf -g  #重新进行安装</span><br></pre></td></tr></table></figure></p><p>然后，使用下面的命令，要PDF文件，首先安装依赖库：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install calibre  </span><br><span class="line">$ gitbook -v 2.1.0 pdf</span><br></pre></td></tr></table></figure><p>发生错误：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">*****************************************************</span><br><span class="line">info: start conversion to pdf ....ERROR</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Error: Command failed: /bin/sh -c ebook-convert /tmp/tmp-29384ctltwbk/SUMMARY.html /tmp/tmp-29384ctltwbk/index.pdf --title=&quot;&quot; --comments=&quot;这本书是gitbook的一个例子&quot; --language=&quot;en&quot; --book-producer=&quot;GitBook&quot; --publisher=&quot;GitBook&quot; --chapter=&quot;descendant-or-self::*[contains(concat(&apos; &apos;, normalize-space(@class), &apos; &apos;), &apos; book-chapter &apos;)]&quot; --chapter-mark=&quot;pagebreak&quot; --page-breaks-before=&quot;/&quot; --level1-toc=&quot;descendant-or-self::*[contains(concat(&apos; &apos;, normalize-space(@class), &apos; &apos;), &apos; book-chapter-1 &apos;)]&quot; --level2-toc=&quot;descendant-or-self::*[contains(concat(&apos; &apos;, normalize-space(@class), &apos; &apos;), &apos; book-chapter-2 &apos;)]&quot; --level3-toc=&quot;descendant-or-self::*[contains(concat(&apos; &apos;, normalize-space(@class), &apos; &apos;), &apos; book-chapter-3 &apos;)]&quot; --no-chapters-in-toc --max-levels=&quot;1&quot; --breadth-first --margin-left=&quot;62&quot; --margin-right=&quot;62&quot; --margin-top=&quot;56&quot; --margin-bottom=&quot;56&quot; --pdf-default-font-size=&quot;12&quot; --pdf-mono-font-size=&quot;12&quot; --paper-size=&quot;a4&quot; --pdf-header-template=&quot;&lt;p class=&apos;header&apos;&gt;&lt;span&gt;&lt;/span&gt;&lt;/p&gt;&quot; --pdf-footer-template=&quot;&lt;p class=&apos;footer&apos;&gt;&lt;span&gt;_SECTION_&lt;/span&gt; &lt;span style=&apos;float:right;&apos;&gt;_PAGENUM_&lt;/span&gt;&lt;/p&gt;&quot;</span><br><span class="line">Usage: ebook-convert input_file output_file [options]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Convert an ebook from one format to another.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">input_file is the input and output_file is the output. Both must be specified as the first two arguments to the command.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">The output ebook format is guessed from the file extension of output_file. output_file can also be of the special format .EXT where EXT is the output file extension. In this case, the name of the output file is derived the name of the input file. Note that the filenames must not start with a hyphen. Finally, if output_file has no extension, then it is treated as a directory and an &quot;open ebook&quot; (OEB) consisting of HTML files is written to that directory. These files are the files that would normally have been passed to the output plugin.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">After specifying the input and output file you can customize the conversion by specifying various options. The available options depend on the input and output file types. To get help on them specify the input and output file and then use the -h option.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">For full documentation of the conversion system see</span><br><span class="line">http://manual.calibre-ebook.com/conversion.html</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Whenever you pass arguments to ebook-convert that have spaces in them, enclose the arguments in quotation marks.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ebook-convert: error: no such option: --pdf-default-font-size</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*****************************************************</span><br></pre></td></tr></table></figure></p><p>解决方法[2]<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo -v &amp;&amp; wget -nv -O- https://raw.githubusercontent.com/kovidgoyal/calibre/master/setup/linux-installer.py | sudo python -c &quot;import sys; main=lambda:sys.stderr.write(&apos;Download failed\n&apos;); exec(sys.stdin.read()); main()&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ gitbook -v 2.1.0 pdf .  # 重新执行命令生成pdf，目标文件为book.pdf</span><br></pre></td></tr></table></figure></p><blockquote><p><code>https://github.com/zhangjikai/gitbook-use/</code></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;gitbook安装&quot;&gt;&lt;a href=&quot;#gitbook安装&quot; class=&quot;headerlink&quot; title=&quot;gitbook安装&quot;&gt;&lt;/a&gt;gitbook安装&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;安装npm&lt;br&gt;从网站 &lt;a href=&quot;https://nodejs
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>绊脚石</title>
    <link href="http://blog.uiste.com/2017/20170410-1.html"/>
    <id>http://blog.uiste.com/2017/20170410-1.html</id>
    <published>2017-04-09T16:22:02.000Z</published>
    <updated>2018-10-19T01:57:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>今天发布了这样一条朋友圈：</p><blockquote><p>有时候，一些不是特别良好的状态产生时，都会有一种体验特别不舒服的忧虑感。大多数这种情况的产生最终还是会产生正面的结果。因为在敢于承担的过程，在问题解决以后会觉得某些地方有些提升。所以今天的忧虑都是靠这个说服自己。</p></blockquote><p><img src="http://7xwlfk.com1.z0.glb.clouddn.com/%E5%9F%BA%E6%9C%AC%E4%B8%8A%E6%98%AF%E8%BF%99%E6%A0%B7%E4%B8%80%E4%B8%AA%E6%83%85%E5%86%B5.png" alt="基本上是这样一个情况  "><br>这段话引起了朋友进一步追问的兴趣，我凯凯而回，说只是装X的东西。自己又想表达的一个观点是，老罗说他创业五年很多失败的经历是成长过程宝贵的财富。自己有意去挖掘一些这样的失败案例。到不为自己所为的成功，但却有成长的必要。</p><p>想到这里，突然想到，学生时代看过的一些求职面试宝典，说面试官可能会问你之前的工作生活中，遇到的最大的空难是什么，你是如何解决的。虽然，以后可能找工作的次数不会太多。但好像此刻对这个问题，有了比较豁然的想法：又要重复那段话了。战胜的最大困难，就是心理斗争的过程，多数的时候由于不好的状态产生时，这种心理上的阴影是最大困难的产生，我有及其良好的态度能说服自己承担下来，战胜它。最后会凯凯而笑，自己又成长了。</p><p>这样的素材，希望能够不断的积累，可能有这些，会让自己的人生道路变得充实一些吧。</p><p>说了好多也都在总结一些空话。素材只做点录：渠道产品逻辑调整，解决终极问题，虽有风险顾虑，却有勇气坚持自己的观点。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天发布了这样一条朋友圈：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;有时候，一些不是特别良好的状态产生时，都会有一种体验特别不舒服的忧虑感。大多数这种情况的产生最终还是会产生正面的结果。因为在敢于承担的过程，在问题解决以后会觉得某些地方有些提升。所以今天的忧虑都是靠这个说服
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>vagrant打造开发环境</title>
    <link href="http://blog.uiste.com/2017/20170405-1.html"/>
    <id>http://blog.uiste.com/2017/20170405-1.html</id>
    <published>2017-04-04T16:52:42.000Z</published>
    <updated>2018-10-19T01:57:01.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">VirtualBox 5.1.8</span><br><span class="line">下载地址 https://www.virtualbox.org/wiki/Download_Old_Builds_5_1</span><br><span class="line">Vagrant 1.8.6</span><br><span class="line"></span><br><span class="line">下载地址：https://releases.hashicorp.com/vagrant/1.8.6/</span><br><span class="line">切记根据自己的操作系统下载，同时分32位和64位</span><br></pre></td></tr></table></figure><h2 id="vagrant常用命令"><a href="#vagrant常用命令" class="headerlink" title="vagrant常用命令"></a>vagrant常用命令</h2><ul><li><p>查看vagrant list<br><code>uiste:box uiste$ vagrant box list</code></p></li><li><p>添加vagrant box<br><code>uiste:box uiste$ vagrant box add ubuntu1404 ubuntu1404.box</code></p></li><li><p>添加虚拟机</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uiste:local_lamp_dev uiste$ pwd</span><br><span class="line">/Users/uiste/vagrant/local_lamp_dev</span><br><span class="line">uiste:local_lamp_dev uiste$ vagrant init ubuntu1404</span><br></pre></td></tr></table></figure></li><li><p>启动虚拟机<br><code>uiste:local_lamp_dev uiste$ vagrant up</code></p></li><li><p>取得链接</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uiste:local_lamp_dev uiste$ vagrant ssh</span><br><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$</span><br></pre></td></tr></table></figure></li><li><p>退出、挂起虚拟机</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$ exit</span><br><span class="line">logout</span><br><span class="line">Connection to 127.0.0.1 closed.</span><br><span class="line">uiste:local_lamp_dev uiste$ vagrant suspend</span><br></pre></td></tr></table></figure></li><li><p>重启虚拟机</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uiste:local_lamp_dev uiste$ vagrant reload</span><br></pre></td></tr></table></figure></li></ul><h2 id="对虚拟机进行优化"><a href="#对虚拟机进行优化" class="headerlink" title="对虚拟机进行优化"></a>对虚拟机进行优化</h2><ul><li>替换源<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak #备份</span><br><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$ sudo vim /etc/apt/sources.list #修改源</span><br><span class="line"></span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$ sudo apt-get update #更新列表</span><br></pre></td></tr></table></figure></li></ul><h2 id="L-A-N-MP软件安装"><a href="#L-A-N-MP软件安装" class="headerlink" title="L(A|N)MP软件安装"></a>L(A|N)MP软件安装</h2><ul><li><p>安装nginx</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$ sudo apt-get install nginx -y</span><br><span class="line">// 安装成功测试</span><br><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$ nginx -v</span><br><span class="line">nginx version: nginx/1.4.6 (Ubuntu)</span><br><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$ curl -I &apos;http://127.0.0.1&apos;</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.4.6 (Ubuntu)</span><br><span class="line">Date: Tue, 04 Apr 2017 17:17:02 GMT</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Content-Length: 612</span><br><span class="line">Last-Modified: Tue, 04 Mar 2014 11:46:45 GMT</span><br><span class="line">Connection: keep-alive</span><br><span class="line">ETag: &quot;5315bd25-264&quot;</span><br><span class="line">Accept-Ranges: bytes</span><br></pre></td></tr></table></figure></li><li><p>安装Apache</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$ sudo apt-get install apache2 -y</span><br><span class="line">// 安装成功测试</span><br><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$ apache2 -v</span><br><span class="line">Server version: Apache/2.4.7 (Ubuntu)</span><br><span class="line">// nginx 服务停止</span><br><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$ sudo /etc/init.d/nginx stop</span><br><span class="line">// 启动 apache2 服务</span><br><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$ sudo /etc/init.d/apache2 start</span><br><span class="line"> * Starting web server apache2                                                  AH00558: apache2: Could not reliably determine the server&apos;s fully qualified domain name, using 10.0.2.15. Set the &apos;ServerName&apos; directive globally to suppress this message</span><br><span class="line"> *</span><br><span class="line"> vagrant@vagrant-ubuntu-trusty-64:~$ curl -I &apos;http://127.0.0.1&apos;</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Date: Tue, 04 Apr 2017 17:24:09 GMT</span><br><span class="line">Server: Apache/2.4.7 (Ubuntu)</span><br><span class="line">Last-Modified: Tue, 04 Apr 2017 17:18:42 GMT</span><br><span class="line">ETag: &quot;2cf6-54c5a77b221fa&quot;</span><br><span class="line">Accept-Ranges: bytes</span><br><span class="line">Content-Length: 11510</span><br><span class="line">Vary: Accept-Encoding</span><br><span class="line">Content-Type: text/html</span><br><span class="line">#端口修改-Apache</span><br><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$ sudo vim  /etc/apache2/ports.conf</span><br><span class="line">Listen 8888</span><br><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$ sudo /etc/init.d/apache2 restart</span><br><span class="line">#端口修改-Nginx</span><br><span class="line">#修改成9000端口 ，默认sock模式</span><br><span class="line">cd /etc/php5/fpm/pool.d</span><br><span class="line">sudo vim www.conf # search listen = 127.0.0.1:9000</span><br><span class="line">sudo /etc/init.d/php5-fpm restart</span><br></pre></td></tr></table></figure></li><li><p>安装MySQL软件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#服务器端</span><br><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$ sudo apt-get install mysql-server</span><br><span class="line">安装期间会提示输入为mysql设置root密码，我这边不操作，直接enter 不设置密码</span><br><span class="line">#客户端</span><br><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$ sudo apt-get install mysql-client</span><br><span class="line">#测试连接库，上面安装服务端没有设置密码，这里直接enter进入</span><br><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$ mysql -uroot -p</span><br><span class="line">Enter password:</span><br></pre></td></tr></table></figure></li><li><p>安装PHP</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#安装php</span><br><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$ sudo apt-get install php5-cli -y</span><br><span class="line">#安装成功测试</span><br><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$ php -v</span><br><span class="line">PHP 5.5.9-1ubuntu4.21 (cli) (built: Feb  9 2017 20:54:58)</span><br><span class="line">#安装php扩展</span><br><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$ sudo apt-get install php5-mcrypt php5-mysql php5-gd -y</span><br><span class="line">#支持apache2的php模块</span><br><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$ sudo apt-get install libapache2-mod-php5</span><br><span class="line">#支持nginx fastcgi 启动php</span><br><span class="line">vagrant@vagrant-ubuntu-trusty-64:~$ sudo apt-get install php5-cgi php5-fpm</span><br><span class="line">#开发Apache文件.htaccess重写功能</span><br><span class="line">vagrant@vagrant-ubuntu-trusty-64:/$ sudo a2enmod rewrite</span><br></pre></td></tr></table></figure></li><li><p>安装git</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vagrant@vagrant-ubuntu-trusty-64:/home/www/code$ sudo apt-get install git -y</span><br></pre></td></tr></table></figure></li></ul><h2 id="Vagrant高级配置"><a href="#Vagrant高级配置" class="headerlink" title="Vagrant高级配置"></a>Vagrant高级配置</h2><ul><li><p>端口转发</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">配置</span><br><span class="line"></span><br><span class="line"> config.vm.network &quot;forwarded_port&quot;, guest: 80, host: 8888 </span><br><span class="line"> config.vm.network &quot;forwarded_port&quot;, guest: 8888, host: 8889</span><br><span class="line">测试效果</span><br><span class="line"></span><br><span class="line">http://127.0.0.1:8888/</span><br><span class="line">http://127.0.0.1:8889/</span><br></pre></td></tr></table></figure></li><li><p>网络设置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">配置</span><br><span class="line"></span><br><span class="line">config.vm.network &quot;private_network&quot;, ip: &quot;192.168.199.101&quot;</span><br><span class="line">效果</span><br><span class="line"></span><br><span class="line">http://192.168.199.101/ 或者 http://192.168.199.101:80/</span><br><span class="line">http://192.168.199.101:8888/</span><br></pre></td></tr></table></figure></li></ul><p>*共享目录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">配置</span><br><span class="line"></span><br><span class="line">config.vm.synced_folder &quot;/Users/uiste/www/code/&quot;, &quot;/home/www&quot;</span><br></pre></td></tr></table></figure></p><h2 id="框架配置"><a href="#框架配置" class="headerlink" title="框架配置"></a>框架配置</h2><h3 id="tp5"><a href="#tp5" class="headerlink" title="tp5"></a>tp5</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/top-think/think tp5</span><br><span class="line">然后切换到tp5目录下面，再克隆核心框架仓库：cd tp5 &amp;&amp; git clone https://github.com/top-think/framework thinkphp</span><br><span class="line">nginx 配置</span><br><span class="line">server &#123;</span><br><span class="line">        server_name tp5.code.com;</span><br><span class="line">        root  /home/www/code/tp5/public;</span><br><span class="line">        index  index.php index.html;</span><br><span class="line">        location / &#123;</span><br><span class="line">            if ( -f $request_filename) &#123;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            if ( !-e $request_filename) &#123;</span><br><span class="line">                rewrite ^/(.*)$ /index.php/$1 last;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location ~ \.php &#123;</span><br><span class="line">            set $script $uri;</span><br><span class="line">            set $path_info &quot;&quot;;</span><br><span class="line">            if ($uri ~ &quot;^(.+\.php)(/.+)&quot;) &#123;</span><br><span class="line">                set $script $1;</span><br><span class="line">                set $path_info $2;</span><br><span class="line">            &#125;</span><br><span class="line">            include   fastcgi_params;</span><br><span class="line">            fastcgi_index    index.php?IF_REWRITE=1;</span><br><span class="line">            fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">            fastcgi_param    PATH_INFO    $path_info;</span><br><span class="line">            fastcgi_param    SCRIPT_FILENAME    $document_root$fastcgi_script_name;</span><br><span class="line">            fastcgi_param    SCRIPT_NAME    $script;</span><br><span class="line">            try_files $uri =404;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">针对fasecgi要配置下php-fpm</span><br><span class="line">vim /etc/php5/fpm/pool.d/www.conf</span><br><span class="line">;listen = /var/run/php5-fpm.sock</span><br><span class="line">listen = 127.0.0.1:9000</span><br><span class="line">无法查看日志 sudo chmod -R 755 /var/log/nginx</span><br><span class="line">apache 配置</span><br><span class="line">    &lt;VirtualHost *:8888&gt;</span><br><span class="line">    ServerName tp5.imooc.test</span><br><span class="line">    DocumentRoot /home/www/code/tp5/public/</span><br><span class="line">    ErrorLog $&#123;APACHE_LOG_DIR&#125;/error.log</span><br><span class="line">    CustomLog $&#123;APACHE_LOG_DIR&#125;/access.log combined</span><br><span class="line">    &lt;/VirtualHost&gt;</span><br><span class="line">无法查看日志sudo chmod -R 755 /var/log/apache2</span><br><span class="line">Forbidden解决办法</span><br><span class="line">cd /etc/apache2</span><br><span class="line">sudo vim apache2.conf &lt;Directory /&gt; Options FollowSymLinks AllowOverride None #修改成AllowOverride ALL 打开rewrite #Require all denied #把这行屏蔽掉，拒绝一切链接 &lt;/Directory&gt;</span><br><span class="line">测试效果</span><br><span class="line">http://tp5.code.com 或者 http://tp5.code.com:8888</span><br><span class="line">做个测试页面 http://tp5.code.com/index/index/test 或者 http://tp5.code.com:8000/index/index/test</span><br></pre></td></tr></table></figure><h3 id="yii2"><a href="#yii2" class="headerlink" title="yii2"></a>yii2</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">下载：github.com/yiisoft/yii2/releases/download/2.0.10/yii-basic-app-2.0.10.tgz</span><br><span class="line">nginx 配置</span><br><span class="line">server &#123;</span><br><span class="line">        charset utf-8;</span><br><span class="line">        client_max_body_size 128M;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name yii.code.com;</span><br><span class="line"></span><br><span class="line">        root  /home/www/code/yii2/web;</span><br><span class="line">        index  index.php;</span><br><span class="line"></span><br><span class="line">        location ~* \.(eot|otf|ttf|woff)$ &#123;</span><br><span class="line">            add_header Access-Control-Allow-Origin *;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            try_files $uri $uri/ /index.php?$args;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location ~ \.php$ &#123;</span><br><span class="line">            include   fastcgi_params;</span><br><span class="line">            fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">            try_files $uri =404;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">apache 配置</span><br><span class="line">    &lt;VirtualHost *:8888&gt;</span><br><span class="line">    ServerName yii.code.com</span><br><span class="line">    DocumentRoot /home/www/code/yii2/web</span><br><span class="line">    #&lt;Directory &quot;/home/www/code/yii2/web&quot;&gt;</span><br><span class="line">            #RewriteEngine on</span><br><span class="line">        #RewriteCond %&#123;REQUEST_FILENAME&#125; !-f</span><br><span class="line">        #RewriteCond %&#123;REQUEST_FILENAME&#125; !-d</span><br><span class="line">        #RewriteRule . index.php</span><br><span class="line">    #&lt;/Directory&gt;</span><br><span class="line">    ErrorLog $&#123;APACHE_LOG_DIR&#125;/error.log</span><br><span class="line">    CustomLog $&#123;APACHE_LOG_DIR&#125;/access.log combined</span><br><span class="line">    &lt;/VirtualHost&gt;</span><br><span class="line">测试效果 * http://yii.code.com 或者 http://yii.code.com:8888 * 做个测试页面 http://yii.code.com/site/test 或者 http://yii.code.com:8000/site/test</span><br><span class="line">问题</span><br><span class="line">runtime/logs&quot;: mkdir(): Permission denied</span><br><span class="line">权限不够 chmod -R 777 runtime (如果在虚拟机不能修改文件权限，请使用nfs共享目录)</span><br><span class="line">yii\web\Request::cookieValidationKey must be configured with a secret key.</span><br><span class="line">config/web.php cookieValidationKey 赋值</span><br><span class="line">如果打不开 site/test ，请修改config/web.php 中urlManager 注释打开</span><br><span class="line">&apos;db&apos; =&gt; require(__DIR__ . &apos;/db.php&apos;),</span><br><span class="line">&apos;urlManager&apos; =&gt; [</span><br><span class="line">    &apos;enablePrettyUrl&apos; =&gt; true,</span><br><span class="line">    &apos;showScriptName&apos;  =&gt; false,</span><br><span class="line">    &apos;rules&apos; =&gt; [</span><br><span class="line">    ],</span><br><span class="line">],</span><br><span class="line">yii2/web/.htaccess</span><br><span class="line">RewriteEngine on</span><br><span class="line">#If a directory or a file exists, use it directly</span><br><span class="line">RewriteCond %&#123;REQUEST_FILENAME&#125; !-f</span><br><span class="line">RewriteCond %&#123;REQUEST_FILENAME&#125; !-d</span><br><span class="line">#Otherwise forward it to index.php</span><br><span class="line">RewriteRule . index.php</span><br></pre></td></tr></table></figure><h3 id="laravel5"><a href="#laravel5" class="headerlink" title="laravel5"></a>laravel5</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">下载： down.golaravel.com/laravel/laravel-v5.1.11.zip</span><br><span class="line">nginx 配置</span><br><span class="line">server &#123;</span><br><span class="line">        charset utf-8;</span><br><span class="line">        client_max_body_size 128M;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name laravel.code.com;</span><br><span class="line"></span><br><span class="line">        root  /home/www/code/laravel/public;</span><br><span class="line">        index  index.php;</span><br><span class="line"></span><br><span class="line">        location ~* \.(eot|otf|ttf|woff)$ &#123;</span><br><span class="line">            add_header Access-Control-Allow-Origin *;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            try_files $uri $uri/ /index.php?$args;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location ~ \.php$ &#123;</span><br><span class="line">            include   fastcgi_params;</span><br><span class="line">            fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">            try_files $uri =404;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">apache 配置</span><br><span class="line">    &lt;VirtualHost *:8888&gt;</span><br><span class="line">    ServerName laravel.code.com</span><br><span class="line">    DocumentRoot /home/www/code/laravel/public/</span><br><span class="line">    ErrorLog $&#123;APACHE_LOG_DIR&#125;/error.log</span><br><span class="line">    CustomLog $&#123;APACHE_LOG_DIR&#125;/access.log combined</span><br><span class="line">    &lt;/VirtualHost&gt;</span><br><span class="line">测试效果</span><br><span class="line">http://laravel.code.com 或者 http://laravel.code.com:8888</span><br></pre></td></tr></table></figure><h2 id="vagrant虚拟机配置"><a href="#vagrant虚拟机配置" class="headerlink" title="vagrant虚拟机配置"></a>vagrant虚拟机配置</h2><p>虚拟机名称<br><code>vb.name = &quot;ubuntu_code&quot;</code><br>虚拟机主机名<br><code>config.vm.hostname = &quot;code&quot;</code><br>配置虚拟机内存和CPU<br><code>vb.memory = &quot;1024&quot;</code><br><code>vb.cpus = 2</code></p><h2 id="打包命令"><a href="#打包命令" class="headerlink" title="打包命令"></a>打包命令</h2><p><code>vagrant package --output uiste.box</code></p><ul><li>打包升级</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">config.vm.provision &quot;shell&quot;, inline: &lt;&lt;-SHELL</span><br><span class="line">  #   apt-get update</span><br><span class="line">  #   apt-get install -y apache2</span><br><span class="line">apt-get insatll -y redis-server</span><br><span class="line">SHELL</span><br><span class="line"></span><br><span class="line">#执行安装命令</span><br><span class="line">vagrant reload --provision</span><br><span class="line">uiste:box uiste$ vagrant box add new_uiste uiste.box</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;下载安装&quot;&gt;&lt;a href=&quot;#下载安装&quot; class=&quot;headerlink&quot; title=&quot;下载安装&quot;&gt;&lt;/a&gt;下载安装&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pr
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Thinkphp5中使用PHPExcel</title>
    <link href="http://blog.uiste.com/2017/20170404-1.html"/>
    <id>http://blog.uiste.com/2017/20170404-1.html</id>
    <published>2017-04-04T06:29:16.000Z</published>
    <updated>2018-10-19T01:57:01.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ul><li>项目所在目录：<br><code>uiste:tp5.0 uiste$ composer require phpexcel/phpexcel</code></li></ul><h2 id="简单上手"><a href="#简单上手" class="headerlink" title="简单上手"></a>简单上手</h2><ol><li><p>实例化对象<br><code>$objPHPExcel = new \PHPExcel();</code></p></li><li><p>获取活动sheet，设置sheet名字</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$objSheet = $objPHPExcel-&gt;getActiveSheet(); </span><br><span class="line">$objSheet -&gt;setTitle(&quot;demo&quot;);//可以给sheet设置名称为&quot;demo&quot;</span><br></pre></td></tr></table></figure></li><li><p>然后就是在表格中写入数据</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//数据量大的时候使用第一种方法</span><br><span class="line">$objSheet-&gt;setCellValue(&quot;A1&quot;,&quot;姓名&quot;)-&gt;setCellValue(&quot;B1&quot;,&quot;分数&quot;);  </span><br><span class="line">$objSheet-&gt;setCellValue(&quot;A2&quot;,&quot;张三&quot;)-&gt;setCellValue(&quot;B2&quot;,&quot;100&quot;);  </span><br><span class="line">//数据量小的时候使用第二种方法</span><br><span class="line">$array = array(  </span><br><span class="line">    array(),  </span><br><span class="line">    array(&apos;姓名&apos;,&apos;分数&apos;),  </span><br><span class="line">    array(&apos;张三&apos;,&apos;60&apos;),  </span><br><span class="line">    array(&apos;李四&apos;,&apos;61&apos;),  </span><br><span class="line">    array(&apos;王五&apos;,&apos;62&apos;),  </span><br><span class="line">);  </span><br><span class="line">$objSheet -&gt; fromArray($array);//数据较大时，不建议使用此方法，建议使用setCellValue()</span><br></pre></td></tr></table></figure></li><li><p>保存写入的数据</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$objWriter = \PHPExcel_IOFactory::createWriter($objPHPExcel, &apos;Excel2007&apos;);//生成一个Excel2007文件  </span><br><span class="line">$objWriter-&gt;save(&apos;/Users/uiste/www/tp5.0/public/test.xlsx&apos;);//保存文件</span><br></pre></td></tr></table></figure></li></ol><h2 id="在浏览器上输出Excel"><a href="#在浏览器上输出Excel" class="headerlink" title="在浏览器上输出Excel"></a>在浏览器上输出Excel</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">$filename = &apos;student.xls&apos;;</span><br><span class="line">$type = &apos;Excel2007&apos;;</span><br><span class="line">$objPHPExcel = new \PHPExcel();</span><br><span class="line">for ($i=0; $i &lt;= 1; $i++) &#123;</span><br><span class="line">// 如果sheet大于0  则创建一个新的sheet</span><br><span class="line">if ($i&gt;0) &#123;  </span><br><span class="line">$objPHPExcel-&gt;createSheet();</span><br><span class="line">&#125;</span><br><span class="line">$objPHPExcel-&gt;setActiveSheetIndex($i);//把当前创建的sheet设置为活动sheet</span><br><span class="line">$objSheet = $objPHPExcel-&gt;getActiveSheet();//获得当前活动Sheet</span><br><span class="line">$objSheet-&gt;setTitle(&quot;student&quot; . $i);</span><br><span class="line">if($i==0)&#123;</span><br><span class="line">$student = Db::name(&apos;student&apos;)-&gt;where([&apos;sex&apos;=&gt;10])-&gt;select();  </span><br><span class="line">&#125;else&#123;  </span><br><span class="line">$student = DB::name(&apos;student&apos;)-&gt;where(&apos;sex != 10&apos;)-&gt;select();  </span><br><span class="line">&#125;</span><br><span class="line">$objSheet-&gt;setCellValue(&apos;A1&apos;,&apos;序号&apos;)</span><br><span class="line"> -&gt;setCellValue(&apos;B1&apos;,&apos;姓名&apos;)</span><br><span class="line"> -&gt;setCellValue(&apos;C1&apos;,&apos;年龄&apos;)</span><br><span class="line"> -&gt;setCellValue(&apos;D1&apos;,&apos;性别&apos;)</span><br><span class="line"> -&gt;setCellValue(&apos;E1&apos;,&apos;创建时间&apos;)</span><br><span class="line"> -&gt;setCellValue(&apos;F1&apos;,&apos;更新时间&apos;);  </span><br><span class="line">$j = 2; // 从第二行开始写入</span><br><span class="line">foreach ($student as $key =&gt; $value) &#123;</span><br><span class="line">$objSheet-&gt;setCellValue(&apos;A&apos;.$j,$value[&apos;id&apos;])</span><br><span class="line"> -&gt;setCellValue(&apos;B&apos;.$j,$value[&apos;name&apos;])</span><br><span class="line"> -&gt;setCellValue(&apos;C&apos;.$j,$value[&apos;age&apos;])</span><br><span class="line"> -&gt;setCellValue(&apos;D&apos;.$j,$value[&apos;sex&apos;])  </span><br><span class="line"> -&gt;setCellValue(&apos;E&apos;.$j,$value[&apos;created_at&apos;])</span><br><span class="line"> -&gt;setCellValue(&apos;F&apos;.$j,$value[&apos;updated_at&apos;]);  </span><br><span class="line">$j++;</span><br><span class="line">&#125;  </span><br><span class="line">&#125;</span><br><span class="line">$objWriter = \PHPExcel_IOFactory::createWriter($objPHPExcel,&apos;Excel5&apos;);//生成excel文件</span><br><span class="line">//$objWriter-&gt;save($dir.&quot;/export_1.xls&quot;);//保存文件</span><br><span class="line">if($type==&quot;Excel5&quot;)&#123;</span><br><span class="line">header(&apos;Content-Type: application/vnd.ms-excel&apos;);//告诉浏览器将要输出excel03文件</span><br><span class="line">&#125;else&#123;</span><br><span class="line">header(&apos;Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&apos;);//告诉浏览器数据excel07文件</span><br><span class="line">&#125;</span><br><span class="line">header(&apos;Content-Disposition: attachment;filename=&quot;&apos;.$filename.&apos;&quot;&apos;);//告诉浏览器将输出文件的名称</span><br><span class="line">header(&apos;Cache-Control: max-age=0&apos;);//禁止缓存</span><br><span class="line">$objWriter-&gt;save(&quot;php://output&quot;);</span><br></pre></td></tr></table></figure><h2 id="读取指定Excel文件中的数据"><a href="#读取指定Excel文件中的数据" class="headerlink" title="读取指定Excel文件中的数据"></a>读取指定Excel文件中的数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">header(&quot;Content-Type:text/html;charset=utf-8&quot;);</span><br><span class="line">$filename=ROOT_PATH . &apos;public&apos; . DS . &quot;test.xlsx&quot;; // 读取文件</span><br><span class="line">$sheetName=array(&quot;demo&quot;); //只加载指定的sheet</span><br><span class="line">$rowStart = 1; //指定开始读取的行数</span><br><span class="line"></span><br><span class="line">$fileType=\PHPExcel_IOFactory::identify($filename);//自动获取文件的类型提供给phpexcel用</span><br><span class="line">$objReader=\PHPExcel_IOFactory::createReader($fileType);//获取文件读取操作对象</span><br><span class="line"></span><br><span class="line">$objReader-&gt;setLoadSheetsOnly($sheetName);//只加载指定的sheet</span><br><span class="line">$objPHPExcel=$objReader-&gt;load($filename);//加载文件</span><br><span class="line">/* 数据量小的时候使用 */</span><br><span class="line">/**$sheetCount=$objPHPExcel-&gt;getSheetCount();//获取excel文件里有多少个sheet</span><br><span class="line">for($i=0;$i&lt;$sheetCount;$i++)&#123;</span><br><span class="line">$data=$objPHPExcel-&gt;getSheet($i)-&gt;toArray();//读取每个sheet里的数据 全部放入到数组中</span><br><span class="line">print_r($data);</span><br><span class="line">&#125;**/</span><br><span class="line"></span><br><span class="line">/* 数据量大的时候使用 */</span><br><span class="line">foreach($objPHPExcel-&gt;getWorksheetIterator() as $sheet)&#123;//循环取sheet</span><br><span class="line">foreach($sheet-&gt;getRowIterator() as $row)&#123;//逐行处理</span><br><span class="line">if($row-&gt;getRowIndex()&lt;$rowStart)&#123;</span><br><span class="line">continue;</span><br><span class="line">&#125;</span><br><span class="line">foreach($row-&gt;getCellIterator() as $cell)&#123;//逐列读取</span><br><span class="line">$data=$cell-&gt;getValue();//获取单元格数据</span><br><span class="line">echo $data.&quot; &quot;;</span><br><span class="line">&#125;</span><br><span class="line">echo &apos;&lt;br/&gt;&apos;;</span><br><span class="line">&#125;</span><br><span class="line">echo &apos;&lt;br/&gt;&apos;;</span><br><span class="line">&#125;</span><br><span class="line">exit;</span><br></pre></td></tr></table></figure><h2 id="小案例-POST发送读取文件数据发送到服务器"><a href="#小案例-POST发送读取文件数据发送到服务器" class="headerlink" title="小案例-POST发送读取文件数据发送到服务器"></a>小案例-POST发送读取文件数据发送到服务器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">public function operate()</span><br><span class="line">&#123;</span><br><span class="line">$filename=ROOT_PATH . &apos;public&apos; . DS . &quot;test.xlsx&quot;; // 读取文件</span><br><span class="line">$sheetName=array(&apos;工作表2&apos;); //只加载指定的sheet</span><br><span class="line">$rowStart = 1; //指定开始读取的行数</span><br><span class="line">$url = &apos;http://www.test.com/history/study4/MVC_1/index.php?c=products&amp;a=add&apos;;</span><br><span class="line">$receive = [&apos;proname&apos;,&apos;proguige&apos;,&apos;proprice&apos;,&apos;proamount&apos;,&apos;proimages&apos;,&apos;proweb&apos;]; // 定义接收方的数据下标</span><br><span class="line">// 第一步读取文件</span><br><span class="line">if (!$data = $this-&gt;_fileRead($filename, $sheetName, $rowStart)) &#123;</span><br><span class="line">echo &apos;无法读取文件中的数据！！！&apos;;</span><br><span class="line">&#125;</span><br><span class="line">// dump($data);die;</span><br><span class="line">// 第二步发送数据请求</span><br><span class="line">foreach ($data as $sheet) &#123; // 工作表</span><br><span class="line">foreach ($sheet as $key1 =&gt; $rows) &#123; // 工作表行</span><br><span class="line">if (count($rows) != count($receive)) &#123;</span><br><span class="line">echo &apos;表中数据列数与要发送的字段数不一致请核实！！！&apos;;die;</span><br><span class="line">&#125;</span><br><span class="line">$row = array();</span><br><span class="line">foreach ($rows as $key =&gt; $cell) &#123; //单元格</span><br><span class="line">$row[$receive[$key]] = $cell;</span><br><span class="line">&#125;</span><br><span class="line">if (!empty($row)) &#123;</span><br><span class="line">// $url = &quot;http://localhost/web_services.php&quot;;</span><br><span class="line">// $post_data = array (&quot;username&quot; =&gt; &quot;bob&quot;,&quot;key&quot; =&gt; &quot;12345&quot;);</span><br><span class="line">$post_data = $row;</span><br><span class="line">$ch = curl_init();</span><br><span class="line">curl_setopt($ch, CURLOPT_URL, $url);</span><br><span class="line">curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);// post数据</span><br><span class="line">curl_setopt($ch, CURLOPT_POST, 1);// post的变量</span><br><span class="line">curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);</span><br><span class="line">$output = curl_exec($ch);</span><br><span class="line">curl_close($ch);</span><br><span class="line"></span><br><span class="line">//打印获得的数据</span><br><span class="line">if ($output) &#123;</span><br><span class="line">echo &apos;第 &apos; . $key1+1 . &apos; 行录入成功！！！&apos; . &apos;&lt;br/&gt;&apos;;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">echo &apos;第 &apos; . $key1+1 . &apos; 行录入失败！！！&apos; . &apos;&lt;br/&gt;&apos;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">echo &apos;录入完成 ， 哈哈哈&lt;br&gt;&apos;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public function _fileRead($filename, $sheetName = [&apos;sheet1&apos;], $rowStart = 1)</span><br><span class="line">&#123;</span><br><span class="line">header(&quot;Content-Type:text/html;charset=utf-8&quot;);</span><br><span class="line"></span><br><span class="line">$fileType=\PHPExcel_IOFactory::identify($filename);//自动获取文件的类型提供给phpexcel用</span><br><span class="line">$objReader=\PHPExcel_IOFactory::createReader($fileType);//获取文件读取操作对象</span><br><span class="line"></span><br><span class="line">$objReader-&gt;setLoadSheetsOnly($sheetName);//只加载指定的sheet</span><br><span class="line">$objPHPExcel=$objReader-&gt;load($filename);//加载文件</span><br><span class="line">/* 数据量小的时候使用 */</span><br><span class="line">$sheetCount=$objPHPExcel-&gt;getSheetCount();//获取excel文件里有多少个sheet</span><br><span class="line">$data = array();</span><br><span class="line">for($i=0;$i&lt;$sheetCount;$i++)&#123;</span><br><span class="line">$data[$sheetName[$i]]=$objPHPExcel-&gt;getSheet($i)-&gt;toArray();//读取每个sheet里的数据 全部放入到数组中</span><br><span class="line">&#125;</span><br><span class="line">return $data;</span><br><span class="line"></span><br><span class="line">/* 数据量大的时候使用 */</span><br><span class="line">// $data = array();</span><br><span class="line">// foreach($objPHPExcel-&gt;getWorksheetIterator() as $sheet)&#123;//循环取sheet</span><br><span class="line">// foreach($sheet-&gt;getRowIterator() as $row)&#123;//逐行处理</span><br><span class="line">// if($row-&gt;getRowIndex()&lt;$rowStart)&#123;</span><br><span class="line">// continue;</span><br><span class="line">// &#125;</span><br><span class="line">// foreach($row-&gt;getCellIterator() as $cell)&#123;//逐列读取</span><br><span class="line">// $data=$cell-&gt;getValue();//获取单元格数据</span><br><span class="line">// echo $data.&quot; &quot;;</span><br><span class="line">// &#125;</span><br><span class="line">// echo &apos;&lt;br/&gt;&apos;;</span><br><span class="line">// &#125;</span><br><span class="line">// echo &apos;&lt;br/&gt;&apos;;</span><br><span class="line">// &#125;</span><br><span class="line">exit;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>相关文章<br><a href="http://www.cnblogs.com/sweet521/p/5868672.html" target="_blank" rel="noopener">PHPExcel的使用</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;项目所在目录：&lt;br&gt;&lt;code&gt;uiste:tp5.0 uiste$ composer require phpexcel/ph
      
    
    </summary>
    
    
      <category term="PHPExcel" scheme="http://blog.uiste.com/tags/PHPExcel/"/>
    
  </entry>
  
  <entry>
    <title>7个高级技巧帮助你释放大量Mac OS X硬盘空间</title>
    <link href="http://blog.uiste.com/2017/20170319-2.html"/>
    <id>http://blog.uiste.com/2017/20170319-2.html</id>
    <published>2017-03-19T04:12:04.000Z</published>
    <updated>2018-10-19T01:57:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>硬盘空间用尽是一件很让人头疼的事情，尤其是MacBook Air等设备上的固态硬盘可用的储存空间很少。下面为大家介绍7个高级技巧来释放大量的硬盘空间，当然这些高级技巧更改了系统功能和文件，必须通过使用命令行实现，还需要使用rm或rf这样的危险命令，所以Mac OS X新手还是要谨慎尝试。</p><p>1：禁用SafeSleep休眠模式——能节省出4GB-16GB空间</p><p><code>Screen Shot 2013-05-11 at 3.57.34 AM.jpg</code></p><p>下面的命令可以关闭OS X原生的休眠功能，也就是SafeSleep。这种休眠模式当Mac休眠或者没电池时会将内存中的内容储存在硬盘上的sleepimage文件上。sleepimage文件与Mac电脑的内存一样大，这意味着如果你的内存是4GB，该文件就有4GB，如果是16GB，该文件就有16GB。关闭SafeSleep可以不让系统自动创建该文件，缺点就是当Mac电脑没电池时，你不能恢复到之前的状态。不过我们可以使用OS X的自动保存功能在电池将要耗尽的时候保存自己的工作。</p><p>如果想要禁用SafeSleep功能，我们需要在终端中输入下面的命令：</p><p><code>sudo pmset -a hibernatemode 0</code></p><p>复制代码<br>然后定位到<code>/private/var/vm/</code>删除已经存在的sleepimage文件</p><p><code>cd /private/var/vm/</code></p><p>复制代码<br>使用下面的命令删除该文件</p><p><code>sudo rm sleepimage</code></p><p>复制代码<br>最后我们要防止OS X继续创建该文件，所以我们需要下面的命令生成一个无法被替换的空文件</p><p><code>touch sleepimage</code><br><code>chmod 000 /private/var/vm/sleepimage</code></p><p>复制代码<br>当然，如果你想要重新开启SafeSleep功能，只需下面的命令即可。</p><p><code>sudo pmset -a hibernatemode 3</code><br><code>sudo rm /private/var/vm/sleepimage</code></p><p>复制代码</p><p>2：移除系统嗓音文件——可以节省出500MB-3GB+硬盘空间</p><p><code>Screen Shot 2013-05-11 at 3.56.52 AM.jpg</code></p><p>如果你不适用文字转语音功能，那么你肯定不会使用到OS X内置的嗓音文件。你可以删除这些文件重新获得硬盘空间。在终端应用中，使用下面的命令即可，首先定位到文件所在文件夹：</p><p><code>cd /System/Library/Speech/</code></p><p>复制代码<br>然后执行删除命令，将所有嗓音文件删除</p><p><code>sudo rm -rf Voices/*</code></p><p>复制代码</p><p>如果你执行了命令，那么你将无法使用系统的文字转语音功能。</p><p>3：删除所有系统日志——可以节省出100MB-2GB硬盘空间</p><p>随着你使用Mac的时间越来越长，系统日志文件也会越来越多，根据电脑的用量、错误和服务，这些文件会越来越多。这些系统日志文件是用来调试和排除故障的，如果你感觉没有用，可以使用下面的命令删除：</p><p><code>sudo rm -rf /private/var/log/*</code></p><p>复制代码</p><p>系统日志文件会不断的产生，所以你可以定时执行这条命令。</p><p>4：删除快速查看生成的缓存文件——可以节省出100MB-300MB硬盘空间</p><p><code>Screen Shot 2013-05-11 at 3.58.21 AM.jpg</code></p><p>快速查看功能是OS X系统内置的文件预览功能，在Finder中选择任何文件后都可以点击空格来查看文件的详情。不过快速查看功能依靠缓存功能才能更流畅，而且这些缓存文件会一直增加，通过下面的命令移除缓存：</p><p><code>sudo rm -rf /private/var/folders/</code></p><p>复制代码</p><p>5：删除Emacs——可以节省出60MB+的硬盘空间</p><p>如果你都不知道什么是Emacs，那么你可以放心的将其移除。Emacs是终端中的文本编辑器，如果你使用的固态硬盘空间实在太小，那么删除它就是不错的选择，况且你还可以使用vi和nano在终端中编辑文本。下面是删除Emacs的命令：</p><p><code>sudo rm -rf /usr/share/emacs/</code></p><p>复制代码</p><p>6：删除临时文件——可以节省500MB-5GB硬盘空间</p><p>/private/var/tmp/是存放系统缓存的文件夹，通常情况下会在系统重启时清楚，不过有时确不会。而且如果你长时间不关闭Mac，也不重启的话，缓存文件会越来越多。使用下面的命令清楚这些临时文件：</p><p><code>cd /private/var/tmp/</code><br><code>rm -rf TM*</code></p><p>复制代码</p><p>7：清除缓存文件——可以节省1GB-10GB硬盘空间</p><p>缓存文件有很多种，比如网页浏览记录，应用meta数据等等。这些缓存文件的容量究竟多大跟用户使用的应用有关，也与Mac重启的频率有关。此外，很多在线音乐播放app也会产生大量的缓存文件，我们可以通过下面的命令删除这些缓存文件：</p><p><code>cd ~/Library/Caches/</code><br><code>rm -rf ~/Library/Caches/*</code></p><p>复制代码</p><p>这里介绍的7个高级方法都需要使用终端才能实现，而且有的方法有些风险，所以请大家使用时注意！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;硬盘空间用尽是一件很让人头疼的事情，尤其是MacBook Air等设备上的固态硬盘可用的储存空间很少。下面为大家介绍7个高级技巧来释放大量的硬盘空间，当然这些高级技巧更改了系统功能和文件，必须通过使用命令行实现，还需要使用rm或rf这样的危险命令，所以Mac OS X新手还
      
    
    </summary>
    
    
      <category term="mac" scheme="http://blog.uiste.com/tags/mac/"/>
    
  </entry>
  
  <entry>
    <title>mac如何查看隐藏文件夹？苹果mac显示隐藏文件夹方法和命令介绍</title>
    <link href="http://blog.uiste.com/2017/20170319-1.html"/>
    <id>http://blog.uiste.com/2017/20170319-1.html</id>
    <published>2017-03-19T04:11:58.000Z</published>
    <updated>2018-10-19T01:57:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>很多时候，无论是Windows还是Mac OS系统一些重要的文件夹和文件都是要被隐藏起来的，以防止用户因为误操作修改或者删除而导致系统或者软件的损坏。但是很多时候我们Mac用户，也需要修改隐藏的文件，才能实现一些操作。所以这个时候我们就需要将隐藏的文件或者文件夹显示出来。<br>那么Mac系统怎么显示隐藏的文件夹和文件呢？或者说Mac显示隐藏文件好文件夹的命令是什么呢？<br>命令方式最简单，键入如下两行命令你就可以实现对文件的现实和隐藏功能了。这个时候肯定会有童鞋问：“在哪里敲命令呢？”，Launchpad——其他——终端，打开之后就可以键入命令了。<br>显示：<code>defaults write com.apple.finder AppleShowAllFiles -bool true</code><br>隐藏：<code>defaults write com.apple.finder AppleShowAllFiles -bool false</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;很多时候，无论是Windows还是Mac OS系统一些重要的文件夹和文件都是要被隐藏起来的，以防止用户因为误操作修改或者删除而导致系统或者软件的损坏。但是很多时候我们Mac用户，也需要修改隐藏的文件，才能实现一些操作。所以这个时候我们就需要将隐藏的文件或者文件夹显示出来。&lt;
      
    
    </summary>
    
    
      <category term="mac" scheme="http://blog.uiste.com/tags/mac/"/>
    
  </entry>
  
  <entry>
    <title>Yii2.0 对数据库 查询的一些简单的操作</title>
    <link href="http://blog.uiste.com/2017/20170226-1.html"/>
    <id>http://blog.uiste.com/2017/20170226-1.html</id>
    <published>2017-02-26T12:06:41.000Z</published>
    <updated>2018-10-19T01:57:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>1： 此方法返回 <code>[&#39;name&#39; =&gt; &#39;daxia&#39;]</code> 的所有数据；</p><p><code>User::find()-&gt;where([&#39;name&#39; =&gt; &#39;daxia&#39;])-&gt;all();</code><br>2： 此方法返回 <code>[&#39;name&#39; =&gt; &#39;daxia&#39;]</code>的一条数据</p><p><code>User::find()-&gt;where([&#39;name&#39; =&gt; &#39;daxia&#39;])-&gt;one();</code><br>3： 在条件name的基础上，额外添加另一个条件sex</p><p><code>User::find()-&gt;where([&#39;name&#39; =&gt; &#39;daxia&#39;])-&gt;andWhere([&#39;sex&#39; =&gt; &#39;女&#39;])-&gt;one();</code></p><p>或者：</p><p><code>User::find()-&gt;where([&#39;name&#39; =&gt; &#39;daxia&#39;, &#39;sex&#39; =&gt; &#39;女&#39;])-&gt;one();</code></p><p>说明： 这两种方法都是可以的<br>4： andFilterWhere/andWhere应用： 在[1427925600-1427968800]之间查询</p><p><code>User::find()-&gt;andFilterWhere([&#39;between&#39;, &#39;regtime&#39;, &#39;1427925600&#39;, &#39;1427968800’])</code><br>说到andFilterWhere，下面我把用到的各种的情况示例列出：</p><p>1) : sql:   id=1 AND id=2<br>     条件:  <code>[&#39;and&#39;, &#39;id=1&#39;, &#39;id=2&#39;]</code></p><p>2) : sql:   id=1 OR id=2<br>     条件:  <code>[&#39;or&#39;, &#39;id=1&#39;, &#39;id=2&#39;]</code></p><p>3) : sql:   id BETWEEN 1 AND 10<br>     条件:   <code>[&#39;between&#39;, &#39;id&#39;, 1, 10]</code></p><p>4) : sql:   id IN (1, 2, 3)<br>     条件:  <code>[&#39;in&#39;, &#39;id&#39;, [1, 2, 3]]</code></p><p>5) : sql:   name LIKE ‘%tester%’     模糊查询<br>     条件:  <code>[&#39;like&#39;, &#39;name&#39;, &#39;tester&#39;]</code></p><p>6) : sql:   age&gt;10<br>     条件:  <code>[&#39;&gt;&#39;, &#39;age&#39;, 10]</code></p><p>5： orderBy() 应用</p><p>sql： ORDER BY <code>id</code> ASC, <code>name</code> DESC</p><p>Yii对应的model书写如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$query-&gt;orderBy([</span><br><span class="line">   &apos;id&apos; =&gt; SORT_ASC,  升序  默认</span><br><span class="line">   &apos;name&apos; =&gt; SORT_DESC,  降序</span><br><span class="line">]);</span><br></pre></td></tr></table></figure></p><p>6： groupBy() 应用：</p><p>sql:  … GROUP BY <code>id</code>, <code>status</code></p><p>Yii对应的model书写如下：</p><p><code>$query-&gt;groupBy([&#39;id&#39;, &#39;status&#39;]);</code><br>7： having()应用：</p><p>sql:  … HAVING <code>status</code> = 1</p><p>Yii对应的model书写如下：</p><p><code>$query-&gt;having([&#39;status&#39; =&gt; 1]);</code><br>8： limit() offset() 应用：</p><p>sql:  … LIMIT 10 OFFSET 20</p><p>Yii对应的model书写如下</p><p><code>$query-&gt;limit(10)-&gt;offset(20);</code><br>9： 用自己书写的sql语句，去查询符合的数据</p><p><code>User::findBySql(&#39;SELECT * FROM user&#39;)-&gt;one();</code> 此方法是用 sql  语句查询 user 表里面的一条数据；</p><p><code>User::findBySql(&#39;SELECT * FROM user&#39;)-&gt;all();</code> 此方法是用 sql  语句查询 user 表里面的所有数据；<br>说明： 测试 - 你也许想要测试或者使用一个由 yii\db\Query 对象创建的 SQL 语句。 你可以使用以下的代码来达到目的：</p><p><code>$query-&gt;createCommand()-&gt;getRawSql();</code><br>下面就是官网上面展示的，一些比较常见的查询方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">yii\db\Query 提供了一整套的用于不同查询目的的方法。</span><br><span class="line">  ● yii\db\Query::all(): 将返回一个由行组成的数组，每一行是一个由名称和值构成的关联数组（译者注：省略键的数组称为索引数组）。</span><br><span class="line">  ● yii\db\Query::one(): 返回结果集的第一行。</span><br><span class="line">  ● yii\db\Query::column(): 返回结果集的第一列。</span><br><span class="line">  ● yii\db\Query::scalar(): 返回结果集的第一行第一列的标量值。</span><br><span class="line">  ● yii\db\Query::exists(): 返回一个表示该查询是否包结果集的值。</span><br><span class="line">  ● yii\db\Query::count(): 返回 COUNT 查询的结果。</span><br><span class="line">  ● 其它集合查询方法: 包括 yii\db\Query::sum(), yii\db\Query::average(), yii\db\Query::max(), yii\db\Query::min() 等. $q 是一个必选参数， 既可以是一个字段名称，又可以是一个 DB 表达式。</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;1： 此方法返回 &lt;code&gt;[&amp;#39;name&amp;#39; =&amp;gt; &amp;#39;daxia&amp;#39;]&lt;/code&gt; 的所有数据；&lt;/p&gt;
&lt;p&gt;&lt;code&gt;User::find()-&amp;gt;where([&amp;#39;name&amp;#39; =&amp;gt; &amp;#39;daxia&amp;
      
    
    </summary>
    
    
      <category term="yii" scheme="http://blog.uiste.com/tags/yii/"/>
    
  </entry>
  
  <entry>
    <title>阶段性搬砖总结</title>
    <link href="http://blog.uiste.com/2017/20170225-1.html"/>
    <id>http://blog.uiste.com/2017/20170225-1.html</id>
    <published>2017-02-25T12:09:53.000Z</published>
    <updated>2018-10-19T01:57:01.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><p>因为最近工作的原因,断了学习成长的一个节奏，想着还是做个记录。虽然暂更博客内容的时间不长，却在这短暂的时间有所迷失了自己的方向，麻木的生活，重复的工作，好像一把机械性的操手。沉浸与思考之后，又自我感觉忧虑。</p><p>也许一辈子都不能做成什么大事，还是希望能做好这一件小事。</p><h2 id="以后"><a href="#以后" class="headerlink" title="以后"></a>以后</h2><p>静心学习，慢一点，稳一点，走好脚下的路…</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;原因&quot;&gt;&lt;a href=&quot;#原因&quot; class=&quot;headerlink&quot; title=&quot;原因&quot;&gt;&lt;/a&gt;原因&lt;/h2&gt;&lt;p&gt;因为最近工作的原因,断了学习成长的一个节奏，想着还是做个记录。虽然暂更博客内容的时间不长，却在这短暂的时间有所迷失了自己的方向，麻木的生活，
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Html Body 莫名加上&#39;MacOSX ATTRV&#39;原因及解决</title>
    <link href="http://blog.uiste.com/2016/20161113-1.html"/>
    <id>http://blog.uiste.com/2016/20161113-1.html</id>
    <published>2016-11-12T17:35:21.000Z</published>
    <updated>2018-10-19T01:57:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>前言</p><p>今天上传项目时是由Mac tar打包上传到Linux服务器解包的，部署完成后访问页面发现页面的Body之前都被加入了</p><p><code>Mac OS X     2��ATTRV(D��-�-com.apple.quarantineq/0000;4c9151bf;Fir</code><br>一行奇怪的字符。</p><p>Mac环境解决方案</p><p>Google后发现Mac解决方案</p><p><code>xattr -r -d com.apple.quarantine file-path</code><br>原文地址<code>http://entropytc.com/got-com-apple-quarantine-problems/</code></p><blockquote><p>不过在Linux下没有xattr命令，就去Linux目录下ls -a发现每个文件都被克隆了一个.<em>开头的文件，由于检查过原始文件并未遭到改动，果然删除这些.</em>开头文件即解决了问题</p></blockquote><p>Linux解决方案 - 批量删除._开头文件</p><p><code>find ./ -name &quot;._*&quot; -exec rm -f {} \;</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;前言&lt;/p&gt;
&lt;p&gt;今天上传项目时是由Mac tar打包上传到Linux服务器解包的，部署完成后访问页面发现页面的Body之前都被加入了&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Mac OS X     2��ATTRV(D��-�-com.apple.quarantineq/0
      
    
    </summary>
    
    
  </entry>
  
</feed>
